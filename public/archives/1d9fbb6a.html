<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>Docker基础 | 尤妤</title><meta name="keywords" content="Docker"><meta name="author" content="尤妤"><meta name="copyright" content="尤妤"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="Docker学习Docker概念Docker基本概念Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中,然后发布到任何流行的Linux或Windows操作系统的机器上,也可以实现虚拟化,容器是完全使用沙箱机制,相互之间不会有任何接口。Linux操作系统本身从系统层面就支持虚拟化技术LXC，LXC有三大特色： cgroup  Linux Cgroups">
<meta property="og:type" content="article">
<meta property="og:title" content="Docker基础">
<meta property="og:url" content="https://www.xiaowangc.com/archives/1d9fbb6a.html">
<meta property="og:site_name" content="尤妤">
<meta property="og:description" content="Docker学习Docker概念Docker基本概念Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中,然后发布到任何流行的Linux或Windows操作系统的机器上,也可以实现虚拟化,容器是完全使用沙箱机制,相互之间不会有任何接口。Linux操作系统本身从系统层面就支持虚拟化技术LXC，LXC有三大特色： cgroup  Linux Cgroups">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://www.xiaowangc.com/img/fengmian/docker.jpeg">
<meta property="article:published_time" content="2022-04-01T15:10:00.000Z">
<meta property="article:modified_time" content="2022-09-29T02:34:26.000Z">
<meta property="article:author" content="尤妤">
<meta property="article:tag" content="Docker">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://www.xiaowangc.com/img/fengmian/docker.jpeg"><link rel="shortcut icon" href="/img/touxiang.jpg"><link rel="canonical" href="https://www.xiaowangc.com/archives/1d9fbb6a"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: 尤妤","link":"链接: ","source":"来源: 尤妤","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Docker基础',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-09-29 10:34:26'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.2.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/touxiang.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">58</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">53</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">17</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-screwdriver-wrench"></i><span> 工具</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://api.xiaowangc.com"><i class="fa-fw fas fa-location-dot"></i><span> IP地址查询</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://decoder.link/"><i class="fa-fw fa-brands fa-expeditedssl"></i><span> TLS检测工具</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://freessl.cn/"><i class="fa-fw fas fa-lock"></i><span> TLS证书申请1</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://letsencrypt.org/"><i class="fa-fw fas fa-lock"></i><span> TLS证书申请2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.sslforfree.com/"><i class="fa-fw fas fa-lock"></i><span> TLS证书申请3</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://awesome-prometheus-alerts.grep.to/"><i class="fa-fw fa-brands fa-watchman-monitoring"></i><span> PromAlertRules</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://ssl-config.mozilla.org/"><i class="fa-fw fa-brands fa-expeditedssl"></i><span> TLS配置生成器</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('/img/fengmian/docker.jpeg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">尤妤</a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 文章</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-screwdriver-wrench"></i><span> 工具</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://api.xiaowangc.com"><i class="fa-fw fas fa-location-dot"></i><span> IP地址查询</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://decoder.link/"><i class="fa-fw fa-brands fa-expeditedssl"></i><span> TLS检测工具</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://freessl.cn/"><i class="fa-fw fas fa-lock"></i><span> TLS证书申请1</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://letsencrypt.org/"><i class="fa-fw fas fa-lock"></i><span> TLS证书申请2</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.sslforfree.com/"><i class="fa-fw fas fa-lock"></i><span> TLS证书申请3</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://awesome-prometheus-alerts.grep.to/"><i class="fa-fw fa-brands fa-watchman-monitoring"></i><span> PromAlertRules</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://ssl-config.mozilla.org/"><i class="fa-fw fa-brands fa-expeditedssl"></i><span> TLS配置生成器</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Docker基础</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-04-01T15:10:00.000Z" title="发表于 2022-04-01 23:10:00">2022-04-01</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-09-29T02:34:26.000Z" title="更新于 2022-09-29 10:34:26">2022-09-29</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%AE%B9%E5%99%A8/">容器</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Docker基础"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Docker学习"><a href="#Docker学习" class="headerlink" title="Docker学习"></a>Docker学习</h1><h1 id="Docker概念"><a href="#Docker概念" class="headerlink" title="Docker概念"></a>Docker概念</h1><h2 id="Docker基本概念"><a href="#Docker基本概念" class="headerlink" title="Docker基本概念"></a>Docker基本概念</h2><h6 id="Docker-是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中-然后发布到任何流行的Linux或Windows操作系统的机器上-也可以实现虚拟化-容器是完全使用沙箱机制-相互之间不会有任何接口。"><a href="#Docker-是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中-然后发布到任何流行的Linux或Windows操作系统的机器上-也可以实现虚拟化-容器是完全使用沙箱机制-相互之间不会有任何接口。" class="headerlink" title="Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中,然后发布到任何流行的Linux或Windows操作系统的机器上,也可以实现虚拟化,容器是完全使用沙箱机制,相互之间不会有任何接口。"></a>Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中,然后发布到任何流行的Linux或Windows操作系统的机器上,也可以实现虚拟化,容器是完全使用沙箱机制,相互之间不会有任何接口。</h6><h6 id="Linux操作系统本身从系统层面就支持虚拟化技术LXC，LXC有三大特色："><a href="#Linux操作系统本身从系统层面就支持虚拟化技术LXC，LXC有三大特色：" class="headerlink" title="Linux操作系统本身从系统层面就支持虚拟化技术LXC，LXC有三大特色："></a>Linux操作系统本身从系统层面就支持虚拟化技术LXC，LXC有三大特色：</h6><ul>
<li><strong>cgroup</strong></li>
</ul>
<h6 id="Linux-Cgroups-Control-Groups-）提供了对组进程及将来子进程的资源限制、控制和统计的能力，这些资源包括-CPU、内存、存储、网络等-通过-Cgroups-，可以方便地限制某个进程的资源占用，并且可以实时地监控进程的监控和统计信息"><a href="#Linux-Cgroups-Control-Groups-）提供了对组进程及将来子进程的资源限制、控制和统计的能力，这些资源包括-CPU、内存、存储、网络等-通过-Cgroups-，可以方便地限制某个进程的资源占用，并且可以实时地监控进程的监控和统计信息" class="headerlink" title="Linux Cgroups (Control Groups ）提供了对组进程及将来子进程的资源限制、控制和统计的能力，这些资源包括 CPU、内存、存储、网络等 通过 Cgroups ，可以方便地限制某个进程的资源占用，并且可以实时地监控进程的监控和统计信息"></a>Linux Cgroups (Control Groups ）提供了对组进程及将来子进程的资源限制、控制和统计的能力，这些资源包括 CPU、内存、存储、网络等 通过 Cgroups ，可以方便地限制某个进程的资源占用，并且可以实时地监控进程的监控和统计信息</h6><ul>
<li><strong>namespace</strong></li>
</ul>
<h6 id="Linux-Namespace是Kernel的一个功能，它可以隔离一系列的系统资源，比如PID、UserID、Netwokr等。"><a href="#Linux-Namespace是Kernel的一个功能，它可以隔离一系列的系统资源，比如PID、UserID、Netwokr等。" class="headerlink" title="Linux Namespace是Kernel的一个功能，它可以隔离一系列的系统资源，比如PID、UserID、Netwokr等。"></a>Linux Namespace是Kernel的一个功能，它可以隔离一系列的系统资源，比如PID、UserID、Netwokr等。</h6><ul>
<li><strong>unionFS</strong></li>
</ul>
<h6 id="Union-File-System-UnionFS-将其他文件系统联合到一个联合挂载点的文件系统服务。它使用branch把不同文件系统的文件和目录透明的覆盖，形成一个单一一致的文件系统，当对这个联合文件系统进行写操作时，系统是真正写到了一个新的文件中，这个虚拟后的联合文件系统是可以对任何文件进行操作的，但是它并没有改变原来的文件，因为unionfs用到了一个重要的资源管理技术，叫做写时复制。"><a href="#Union-File-System-UnionFS-将其他文件系统联合到一个联合挂载点的文件系统服务。它使用branch把不同文件系统的文件和目录透明的覆盖，形成一个单一一致的文件系统，当对这个联合文件系统进行写操作时，系统是真正写到了一个新的文件中，这个虚拟后的联合文件系统是可以对任何文件进行操作的，但是它并没有改变原来的文件，因为unionfs用到了一个重要的资源管理技术，叫做写时复制。" class="headerlink" title="Union File System(UnionFS): 将其他文件系统联合到一个联合挂载点的文件系统服务。它使用branch把不同文件系统的文件和目录透明的覆盖，形成一个单一一致的文件系统，当对这个联合文件系统进行写操作时，系统是真正写到了一个新的文件中，这个虚拟后的联合文件系统是可以对任何文件进行操作的，但是它并没有改变原来的文件，因为unionfs用到了一个重要的资源管理技术，叫做写时复制。"></a>Union File System(UnionFS): 将其他文件系统联合到一个联合挂载点的文件系统服务。它使用branch把不同文件系统的文件和目录透明的覆盖，形成一个单一一致的文件系统，当对这个联合文件系统进行写操作时，系统是真正写到了一个新的文件中，这个虚拟后的联合文件系统是可以对任何文件进行操作的，但是它并没有改变原来的文件，因为unionfs用到了一个重要的资源管理技术，叫做写时复制。</h6><h6 id="写时复制-Copy-on-write-CoW-是一种对可修改的资源实现高校复制的资源管理技术。它的思想是，如果一个资源是重复的没有任何修改，这时并不需要立即创建一个新的资源，这个资源可以被新旧实例共享。创建新资源发生在第一次写操作，也就是对资源进行修改的时候。通过这种资源共享的方式，可以显著地减少未修改资源复制带来的消耗，但是资源也会在进行资源修改时增加小部分的开销。"><a href="#写时复制-Copy-on-write-CoW-是一种对可修改的资源实现高校复制的资源管理技术。它的思想是，如果一个资源是重复的没有任何修改，这时并不需要立即创建一个新的资源，这个资源可以被新旧实例共享。创建新资源发生在第一次写操作，也就是对资源进行修改的时候。通过这种资源共享的方式，可以显著地减少未修改资源复制带来的消耗，但是资源也会在进行资源修改时增加小部分的开销。" class="headerlink" title="写时复制(Copy-on-write,CoW): 是一种对可修改的资源实现高校复制的资源管理技术。它的思想是，如果一个资源是重复的没有任何修改，这时并不需要立即创建一个新的资源，这个资源可以被新旧实例共享。创建新资源发生在第一次写操作，也就是对资源进行修改的时候。通过这种资源共享的方式，可以显著地减少未修改资源复制带来的消耗，但是资源也会在进行资源修改时增加小部分的开销。"></a><strong>写时复制(Copy-on-write,CoW)</strong>: 是一种对可修改的资源实现高校复制的资源管理技术。它的思想是，如果一个资源是重复的没有任何修改，这时并不需要立即创建一个新的资源，这个资源可以被新旧实例共享。创建新资源发生在第一次写操作，也就是对资源进行修改的时候。通过这种资源共享的方式，可以显著地减少未修改资源复制带来的消耗，但是资源也会在进行资源修改时增加小部分的开销。</h6><h2 id="虚拟化技术"><a href="#虚拟化技术" class="headerlink" title="虚拟化技术"></a>虚拟化技术</h2><h3 id="虚拟化分类"><a href="#虚拟化分类" class="headerlink" title="虚拟化分类"></a>虚拟化分类</h3><ul>
<li><p>SaaS(软件即服务)</p>
<blockquote>
<p>SaaS，是Software-as-a-Service的缩写名称，意思为软件即服务，即通过网络提供软件服务；简单来说用户需要使用某款软件直接双击进行运行，无需对软件进行下载安装等等。由SaaS进行提供，例如Office365</p>
</blockquote>
<ul>
<li>各互联网的应用</li>
</ul>
</li>
<li><p>PaaS(平台即服务)</p>
<blockquote>
<p>PaaS是（Platform as a Service）的缩写，是指平台即服务。 把服务器平台作为一种服务提供的商业模式，通过网络进行程序提供的服务称之为SaaS;简单来说就是通过互联网提供：(虚拟化)硬件+(各种)软件环境平台，例如做开发无需自行构建系统+编译环境，由PaaS进行提供。</p>
</blockquote>
<ul>
<li>Docker</li>
<li>LXC</li>
<li>OpenShitf</li>
</ul>
</li>
<li><p>IaaS(基础设施即服务)</p>
<blockquote>
<p>IaaS（Infrastructure as a Service），即基础设施即服务。指把IT基础设施作为一种服务通过网络对外提供；简单来说就是通过网络向用户提供一套基础的硬件设施(CPU、内存、主板、网卡…..)。常见的如阿里云的云服务器，在购买时选择各种的硬件配置…</p>
</blockquote>
<ul>
<li>阿里云ECS</li>
</ul>
</li>
</ul>
<h3 id="传统虚拟化与容器"><a href="#传统虚拟化与容器" class="headerlink" title="传统虚拟化与容器"></a>传统虚拟化与容器</h3><ul>
<li>传统虚拟技术：</li>
</ul>
<h6 id="通过虚拟化技术模拟出一整套硬件设施，然后在此基础上安装一套完整的操作系统，并在这个系统上面安装和运行软件"><a href="#通过虚拟化技术模拟出一整套硬件设施，然后在此基础上安装一套完整的操作系统，并在这个系统上面安装和运行软件" class="headerlink" title="通过虚拟化技术模拟出一整套硬件设施，然后在此基础上安装一套完整的操作系统，并在这个系统上面安装和运行软件"></a>通过虚拟化技术模拟出一整套硬件设施，然后在此基础上安装一套完整的操作系统，并在这个系统上面安装和运行软件</h6><ul>
<li>容器技术：</li>
</ul>
<h6 id="直接运行在宿主机的内核，容器是没有自己的内核；每个容器都是互相隔离互不影响，每个容器都有自己的文件系统"><a href="#直接运行在宿主机的内核，容器是没有自己的内核；每个容器都是互相隔离互不影响，每个容器都有自己的文件系统" class="headerlink" title="直接运行在宿主机的内核，容器是没有自己的内核；每个容器都是互相隔离互不影响，每个容器都有自己的文件系统"></a>直接运行在宿主机的内核，容器是没有自己的内核；每个容器都是互相隔离互不影响，每个容器都有自己的文件系统</h6><p><img src="https://images.weserv.nl/?url=https://img2020.cnblogs.com/blog/2242444/202112/2242444-20211218065435728-1516959397.png"></p>
<h1 id="Docker安装部署"><a href="#Docker安装部署" class="headerlink" title="Docker安装部署"></a>Docker安装部署</h1><h2 id="Docker的基本组成"><a href="#Docker的基本组成" class="headerlink" title="Docker的基本组成"></a>Docker的基本组成</h2><ul>
<li><strong>仓库(Repository)：</strong><ul>
<li>用于存放镜像的地方；</li>
<li>仓库分类：<ul>
<li>公有仓库：Docker_Hub、阿里云等</li>
<li>私有仓库：自行创建</li>
</ul>
</li>
</ul>
</li>
<li><strong>镜像(Image)：</strong><ul>
<li>Docker镜像类似一个模板，可以通过模板进行创建容器</li>
<li>一个镜像可以创建多个容器</li>
</ul>
</li>
<li><strong>容器(Container)：</strong><ul>
<li>利用容器技术，独立运行一个或一组应用，通过镜像来进行创建</li>
</ul>
</li>
</ul>
<p><img src="https://images.weserv.nl/?url=https://img2020.cnblogs.com/blog/2242444/202112/2242444-20211218065715035-942358671.png"></p>
<h2 id="Docker安装"><a href="#Docker安装" class="headerlink" title="Docker安装"></a>Docker安装</h2><h3 id="准备系统环境"><a href="#准备系统环境" class="headerlink" title="准备系统环境"></a>准备系统环境</h3><ul>
<li>操作系统<ul>
<li>操作系统：RedHat8.4(CentOS亦可)</li>
<li>CPU：x4</li>
<li>内存：4GB</li>
<li>内核：4.18.0-305.el8.x86_64</li>
</ul>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# uname -a</span><br><span class="line">Linux node1 4.18.0-305.el8.x86_64 #1 SMP Thu Apr 29 08:54:30 EDT 2021 x86_64 x86_64 x86_64 GNU/Linux</span><br><span class="line">[root@node1 ~]# cat /etc/redhat-release</span><br><span class="line">Red Hat Enterprise Linux release 8.4 (Ootpa)</span><br><span class="line">[root@node1 ~]# free -h</span><br><span class="line">              total        used        free      shared  buff/cache   available</span><br><span class="line">Mem:          3.6Gi       327Mi       3.0Gi       9.0Mi       285Mi       3.1Gi</span><br><span class="line">Swap:         2.0Gi          0B       2.0Gi</span><br><span class="line">[root@node1 ~]# lscpu | grep Core</span><br><span class="line">Core(s) per socket:  4</span><br></pre></td></tr></table></figure>

<h3 id="卸载旧版本"><a href="#卸载旧版本" class="headerlink" title="卸载旧版本"></a>卸载旧版本</h3><blockquote>
<p>如果有安装旧版本先进行卸载，我这是全新的系统所以不用执行以下操作</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# dnf remove docker\</span><br><span class="line">docker-client\</span><br><span class="line">docker-client-latest\</span><br><span class="line">docker-common\</span><br><span class="line">docker-latest\</span><br><span class="line">docker-logrotate\</span><br><span class="line">docker-engine</span><br><span class="line"></span><br><span class="line">Updating Subscription Management repositories.</span><br><span class="line">Unable to read consumer identity</span><br><span class="line"></span><br><span class="line">This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.</span><br><span class="line"></span><br><span class="line">No match for argument: dockerdocker-clientdocker-client-latestdocker-commondocker-latestdocker-logrotatedocker-engine</span><br><span class="line">No packages marked for removal.</span><br><span class="line">Dependencies resolved.</span><br><span class="line">Nothing to do.</span><br><span class="line">Complete!</span><br><span class="line">[root@node1 ~]#</span><br></pre></td></tr></table></figure>

<h3 id="安装方式"><a href="#安装方式" class="headerlink" title="安装方式"></a>安装方式</h3><blockquote>
<p>Docker的安装方法有主要有3中，本文档主要介绍在线安装</p>
</blockquote>
<ul>
<li>设置Docker的存储库并从中进行安装，以便后续进行升级</li>
<li>下载RPM包进行手动安装或升级，在无法访问互联网的情况下使用</li>
<li>在特殊环境中使用自动化进行安装Docker</li>
</ul>
<h3 id="使用存储库进行在线安装"><a href="#使用存储库进行在线安装" class="headerlink" title="使用存储库进行在线安装"></a>使用存储库进行在线安装</h3><ul>
<li><p>设置存储库</p>
<blockquote>
<p>由于国外镜像站速度鸡肋，这里我们使用阿里云的镜像</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# wget -O /etc/yum.repos.d/docker-ce.repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line">--2021-12-09 01:38:19--  https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo</span><br><span class="line">Resolving mirrors.aliyun.com (mirrors.aliyun.com)... 110.188.28.225, 110.188.28.226, 110.188.28.230, ...</span><br><span class="line">Connecting to mirrors.aliyun.com (mirrors.aliyun.com)|110.188.28.225|:443... connected.</span><br><span class="line">HTTP request sent, awaiting response... 200 OK</span><br><span class="line">Length: 1919 (1.9K) [application/octet-stream]</span><br><span class="line">Saving to: ‘/etc/yum.repos.d/docker-ce.repo’</span><br><span class="line"></span><br><span class="line">/etc/yum.repos.d/docker-ce.re 100%[=================================================&gt;]   1.87K  --.-KB/s    in 0s</span><br><span class="line"></span><br><span class="line">2021-12-09 01:38:19 (53.8 MB/s) - ‘/etc/yum.repos.d/docker-ce.repo’ saved [1919/1919]</span><br><span class="line"></span><br><span class="line">[root@node1 ~]# dnf makecache</span><br><span class="line">Updating Subscription Management repositories.</span><br><span class="line">Unable to read consumer identity</span><br><span class="line"></span><br><span class="line">This system is not registered to Red Hat Subscription Management. You can use subscription-manager to register.</span><br><span class="line"></span><br><span class="line">Docker CE Stable - x86_64                                                                12 kB/s |  19 kB     00:01</span><br><span class="line">Metadata cache created.</span><br><span class="line">[root@node1 ~]#</span><br></pre></td></tr></table></figure>
</li>
<li><p>安装Docker引擎</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">由于我的RedHat8.4存在Podman、cockpit等软件包与Docker有冲突所以加了--allowerasing参数</span></span><br><span class="line">[root@node1 ~]# dnf -y install docker-ce docker-ce-cli containerd.io --allowerasing</span><br><span class="line">  ...</span><br><span class="line">  Verifying        : buildah-1.19.7-1.module+el8.4.0+10607+f4da7515.x86_64                                          6/9</span><br><span class="line">  Verifying        : cockpit-podman-29-2.module+el8.4.0+10607+f4da7515.noarch                                       7/9</span><br><span class="line">  Verifying        : podman-3.0.1-6.module+el8.4.0+10607+f4da7515.x86_64                                            8/9</span><br><span class="line">  Verifying        : podman-catatonit-3.0.1-6.module+el8.4.0+10607+f4da7515.x86_64                                  9/9</span><br><span class="line">Installed products updated.</span><br><span class="line"></span><br><span class="line">Installed:</span><br><span class="line">  containerd.io-1.4.12-3.1.el8.x86_64 docker-ce-3:20.10.11-3.el8.x86_64 docker-ce-rootless-extras-20.10.11-3.el8.x86_64</span><br><span class="line">  libcgroup-0.41-19.el8.x86_64</span><br><span class="line">Removed:</span><br><span class="line">  buildah-1.19.7-1.module+el8.4.0+10607+f4da7515.x86_64  cockpit-podman-29-2.module+el8.4.0+10607+f4da7515.noarch</span><br><span class="line">  podman-3.0.1-6.module+el8.4.0+10607+f4da7515.x86_64    podman-catatonit-3.0.1-6.module+el8.4.0+10607+f4da7515.x86_64</span><br><span class="line"></span><br><span class="line">Complete!</span><br><span class="line">[root@node1 ~]#</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动并设置Docker为开机自启</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# systemctl enable --now docker</span><br><span class="line">Created symlink /etc/systemd/system/multi-user.target.wants/docker.service → /usr/lib/systemd/system/docker.service.</span><br><span class="line">[root@node1 ~]#</span><br></pre></td></tr></table></figure>
</li>
<li><p>查看Docker版本</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker version</span><br><span class="line">Client: Docker Engine - Community</span><br><span class="line"> Version:           20.10.11</span><br><span class="line"> API version:       1.41</span><br><span class="line"> Go version:        go1.16.9</span><br><span class="line"> Git commit:        dea9396</span><br><span class="line"> Built:             Thu Nov 18 00:36:58 2021</span><br><span class="line"> OS/Arch:           linux/amd64</span><br><span class="line"> Context:           default</span><br><span class="line"> Experimental:      true</span><br><span class="line"></span><br><span class="line">Server: Docker Engine - Community</span><br><span class="line"> Engine:</span><br><span class="line">  Version:          20.10.11</span><br><span class="line">  API version:      1.41 (minimum version 1.12)</span><br><span class="line">  Go version:       go1.16.9</span><br><span class="line">  Git commit:       847da18</span><br><span class="line">  Built:            Thu Nov 18 00:35:20 2021</span><br><span class="line">  OS/Arch:          linux/amd64</span><br><span class="line">  Experimental:     false</span><br><span class="line"> containerd:</span><br><span class="line">  Version:          1.4.12</span><br><span class="line">  GitCommit:        7b11cfaabd73bb80907dd23182b9347b4245eb5d</span><br><span class="line"> runc:</span><br><span class="line">  Version:          1.0.2</span><br><span class="line">  GitCommit:        v1.0.2-0-g52b36a2</span><br><span class="line"> docker-init:</span><br><span class="line">  Version:          0.19.0</span><br><span class="line">  GitCommit:        de40ad0</span><br><span class="line">[root@node1 ~]#</span><br></pre></td></tr></table></figure>
</li>
<li><p>测试Docker</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker run hello-world</span><br><span class="line">Unable to find image &#x27;hello-world:latest&#x27; locally</span><br><span class="line">latest: Pulling from library/hello-world</span><br><span class="line">2db29710123e: Pull complete</span><br><span class="line">Digest: sha256:cc15c5b292d8525effc0f89cb299f1804f3a725c8d05e158653a563f15e4f685</span><br><span class="line">Status: Downloaded newer image for hello-world:latest</span><br><span class="line"></span><br><span class="line">Hello from Docker!</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">此消息显示您的安装似乎工作正常。</span></span><br><span class="line">This message shows that your installation appears to be working correctly.</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">为了生成此消息，Docker采取了以下步骤：</span></span><br><span class="line">To generate this message, Docker took the following steps:</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Docker客户端已联系Docker守护程序。</span></span><br><span class="line"> 1. The Docker client contacted the Docker daemon.</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Docker守护进程从Docker中心提取“hello world”映像。（amd64）</span></span><br><span class="line"> 2. The Docker daemon pulled the &quot;hello-world&quot; image from the Docker Hub.</span><br><span class="line">    (amd64)</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Docker守护进程从运行生成当前正在读取的输出的可执行文件。</span></span><br><span class="line"> 3. The Docker daemon created a new container from that image which runs the</span><br><span class="line">    executable that produces the output you are currently reading.</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">Docker守护进程将该输出流式传输到Docker客户端，后者将其发送到你的终点站</span></span><br><span class="line"> 4. The Docker daemon streamed that output to the Docker client, which sent it</span><br><span class="line">    to your terminal.</span><br><span class="line"></span><br><span class="line">To try something more ambitious, you can run an Ubuntu container with:</span><br><span class="line"><span class="meta prompt_"> $ </span><span class="language-bash">docker run -it ubuntu bash</span></span><br><span class="line"></span><br><span class="line">Share images, automate workflows, and more with a free Docker ID:</span><br><span class="line"> https://hub.docker.com/</span><br><span class="line"></span><br><span class="line">For more examples and ideas, visit:</span><br><span class="line"> https://docs.docker.com/get-started/</span><br><span class="line"></span><br><span class="line">[root@node1 ~]#</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="卸载Docker"><a href="#卸载Docker" class="headerlink" title="卸载Docker"></a>卸载Docker</h2><blockquote>
<p>如需卸载请按照如下步骤</p>
</blockquote>
<ul>
<li><p>卸载 Docker Engine、CLI 和 Containerd 包：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dnf -y remove docker-ce docker-ce-cli containerd.io</span><br></pre></td></tr></table></figure>
</li>
<li><p>主机上的映像、容器、卷或自定义配置文件不会自动删除。删除所有镜像、容器和卷：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">rm -rf /var/lib/docker</span><br><span class="line">rm -rf /var/lib/containerd</span><br></pre></td></tr></table></figure></li>
</ul>
<h1 id="Docker命令"><a href="#Docker命令" class="headerlink" title="Docker命令"></a>Docker命令</h1><blockquote>
<p>掌握本图片的命令以及常用参数算是掌握Docker常用操作了</p>
</blockquote>
<p><img src="https://images.weserv.nl/?url=https://img2020.cnblogs.com/blog/2242444/202112/2242444-20211218065737234-1183832367.png"></p>
<ul>
<li><p>帮助命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker version # 显示版本信息</span><br><span class="line">docker info # 显示docker系统详细信息</span><br><span class="line">docker 命令 --help # 显示命令的详细帮助</span><br></pre></td></tr></table></figure>
</li>
<li><p>docker命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">docker命令格式</span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">docker [可选选项] 命令</span></span><br><span class="line">Usage:  docker [OPTIONS] COMMAND</span><br><span class="line"></span><br><span class="line">A self-sufficient runtime for containers</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">选项</span></span><br><span class="line">Options:</span><br><span class="line">	  					   # 客户端配置文件地址(默认在&quot;/root/.docker&quot;)</span><br><span class="line">      --config string      Location of client config files (default &quot;/root/.docker&quot;)</span><br><span class="line">      					   # 用于连接到守护进程的上下文的名称</span><br><span class="line">  -c, --context string     Name of the context to use to connect to the daemon (overrides DOCKER_HOST env var and</span><br><span class="line">                           default context set with &quot;docker context use&quot;)</span><br><span class="line">                           # 开启调试模式</span><br><span class="line">  -D, --debug              Enable debug mode</span><br><span class="line">  						   # 连接到的守护程序套接字</span><br><span class="line">  -H, --host list          Daemon socket(s) to connect to</span><br><span class="line">  						   # 设置日志记录级别（“调试”|“信息”|“警告”|“错误”|“致命”）（默认为“信息”）</span><br><span class="line">  -l, --log-level string   Set the logging level (&quot;debug&quot;|&quot;info&quot;|&quot;warn&quot;|&quot;error&quot;|&quot;fatal&quot;) (default &quot;info&quot;)</span><br><span class="line">						   # 使用TLS证书</span><br><span class="line">	  --tls                Use TLS; implied by --tlsverify</span><br><span class="line">      					   # 仅由此CA签署的信任证书</span><br><span class="line">      --tlscacert string   Trust certs signed only by this CA (default &quot;/root/.docker/ca.pem&quot;)</span><br><span class="line">						   # TLS证书文件的路径(默认在&quot;/root/.docker/cert.pem&quot;)</span><br><span class="line">	  --tlscert string     Path to TLS certificate file (default &quot;/root/.docker/cert.pem&quot;)</span><br><span class="line">	  					   # TLS密钥文件的路径(默认在&quot;/root/.docker/key.pem&quot;)</span><br><span class="line">      --tlskey string      Path to TLS key file (default &quot;/root/.docker/key.pem&quot;)</span><br><span class="line">      					   # 使用TLS并验证远程</span><br><span class="line">      --tlsverify          Use TLS and verify the remote</span><br><span class="line">      					   # 打印版本信息并退出</span><br><span class="line">  -v, --version            Print version information and quit</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">管理命令</span></span><br><span class="line">Management Commands:</span><br><span class="line">  app*        Docker App (Docker Inc., v0.9.1-beta3)	# Docker应用</span><br><span class="line">  builder     Manage builds		# 管理构建</span><br><span class="line">  buildx*     Build with BuildKit (Docker Inc., v0.6.3-docker)		# 使用BuildKit构建</span><br><span class="line">  config      Manage Docker configs		# 管理Docker配置</span><br><span class="line">  container   Manage containers 	#管理容器</span><br><span class="line">  context     Manage contexts 	# 管理上下文</span><br><span class="line">  image       Manage images		# 管理镜像</span><br><span class="line">  manifest    Manage Docker image manifests and manifest lists 	# 管理Docker映像清单和清单列表</span><br><span class="line">  network     Manage networks	# 管理网络</span><br><span class="line">  node        Manage Swarm nodes	# 管理群集节点</span><br><span class="line">  plugin      Manage plugins 	# 管理插件</span><br><span class="line">  scan*       Docker Scan (Docker Inc., v0.9.0) 	# Docker扫描</span><br><span class="line">  secret      Manage Docker secrets 	# 管理Docker机密</span><br><span class="line">  service     Manage services 	# 管理服务</span><br><span class="line">  stack       Manage Docker stacks 	# 管理Docker堆栈</span><br><span class="line">  swarm       Manage Swarm 	# 管理群集</span><br><span class="line">  system      Manage Docker # 管理Docker</span><br><span class="line">  trust       Manage trust on Docker images 	# 管理对Docker映像的信任</span><br><span class="line">  volume      Manage volumes 	# 管理卷</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">命令</span></span><br><span class="line">Commands:</span><br><span class="line">			  # 将本地标准输入、输出和错误流附加到正在运行的容器</span><br><span class="line">  attach      Attach local standard input, output, and error streams to a running container</span><br><span class="line">  build       Build an image from a Dockerfile	# 从Dockerfile生成映像</span><br><span class="line">  commit      Create a new image from a container&#x27;s changes	 # 根据容器的更改创建新图像</span><br><span class="line">  			  # 在容器和本地文件系统之间复制文件/文件夹</span><br><span class="line">  cp          Copy files/folders between a container and the local filesystem</span><br><span class="line">  create      Create a new container 	# 创建一个新容器</span><br><span class="line">  			  # 检查对容器文件系统上的文件或目录的更改</span><br><span class="line">  diff        Inspect changes to files or directories on a container&#x27;s filesystem</span><br><span class="line">  events      Get real time events from the server  # 从服务器获取实时事件</span><br><span class="line">  exec        Run a command in a running container	# 在正在运行的容器中运行命令</span><br><span class="line">  export      Export a container&#x27;s filesystem as a tar archive	# 将容器的文件系统导出为tar归档</span><br><span class="line">  history     Show the history of an image	# 显示镜像的历史记录</span><br><span class="line">  images      List images	# 列出镜像</span><br><span class="line">  import      Import the contents from a tarball to create a filesystem image	# 从tarball导入内容以创建文件系统映像</span><br><span class="line">  info        Display system-wide information	# 显示系统范围的信息</span><br><span class="line">  inspect     Return low-level information on Docker objects	# 返回有关Docker对象的低级信息</span><br><span class="line">  kill        Kill one or more running containers	# 杀死一个或多个正在运行的容器</span><br><span class="line">  load        Load an image from a tar archive or STDIN	# 从tar存档或STDIN加载镜像</span><br><span class="line">  login       Log in to a Docker registry	# 登录到Docker注册表</span><br><span class="line">  logout      Log out from a Docker registry	# 从Docker注册表注销</span><br><span class="line">  logs        Fetch the logs of a container		# 获取容器的日志</span><br><span class="line">  pause       Pause all processes within one or more containers		# 暂停一个或多个容器中的所有进程</span><br><span class="line">  port        List port mappings or a specific mapping for the container		# 列出容器的端口映射或特定映射</span><br><span class="line">  ps          List containers		# 列出容器</span><br><span class="line">  pull        Pull an image or a repository from a registry		# 从注册表中提取镜像或存储库</span><br><span class="line">  push        Push an image or a repository to a registry		# 将镜像或存储库推送到注册表</span><br><span class="line">  rename      Rename a container		# 重命名容器</span><br><span class="line">  restart     Restart one or more containers		# 重新启动一个或多个容器</span><br><span class="line">  rm          Remove one or more containers			# 移除一个或多个容器</span><br><span class="line">  rmi         Remove one or more images			# 删除一个或多个镜像</span><br><span class="line">  run         Run a command in a new container		# 在新容器中运行命令</span><br><span class="line">  			  # 将一个或多个镜像保存到tar存档（默认情况下流式传输到stdout）</span><br><span class="line">  save        Save one or more images to a tar archive (streamed to STDOUT by default)</span><br><span class="line">  search      Search the Docker Hub for images	# 在Docker Hub中搜索镜像</span><br><span class="line">  start       Start one or more stopped containers		# 启动一个或多个停止的容器</span><br><span class="line">  stats       Display a live stream of container(s) resource usage statistics	# 显示容器资源使用统计信息的实时流</span><br><span class="line">  stop        Stop one or more running containers		# 停止一个或多个正在运行的容器</span><br><span class="line">  tag         Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE		# 创建引用源镜像的标记目标镜像;给镜像打标签</span><br><span class="line">  top         Display the running processes of a container		# 显示容器的运行进程</span><br><span class="line">  unpause     Unpause all processes within one or more containers		# 取消暂停一个或多个容器中的所有进程</span><br><span class="line">  update      Update configuration of one or more containers		# 更新一个或多个容器的配置</span><br><span class="line">  version     Show the Docker version information		# 显示Docker版本信息</span><br><span class="line">              # 阻止，直到一个或多个容器停止，然后打印其出口代码</span><br><span class="line">  wait        Block until one or more containers stop, then print their exit codes	</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">有关命令的详细信息，请运行“docker 命令 --<span class="built_in">help</span>”。</span></span><br><span class="line">Run &#x27;docker COMMAND --help&#x27; for more information on a command.</span><br><span class="line">[root@node1 ~]#</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="镜像命令"><a href="#镜像命令" class="headerlink" title="镜像命令"></a>镜像命令</h2><ul>
<li><p>docker images	</p>
<blockquote>
<p>查询本地所有的镜像</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker images</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">存储库		标签		 镜像ID		   创建时间        大小</span></span><br><span class="line">REPOSITORY    TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">hello-world   latest    feb5d9fea6a5   2 months ago   13.3kB</span><br><span class="line">[root@node1 ~]# docker images --help</span><br><span class="line"></span><br><span class="line">Usage:  docker images [OPTIONS] [REPOSITORY[:TAG]]</span><br><span class="line"></span><br><span class="line">List images</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -a, --all             Show all images (default hides intermediate images)		# 显示所有镜像</span><br><span class="line">      --digests         Show digests	# 显示摘要</span><br><span class="line">  -f, --filter filter   Filter output based on conditions provided</span><br><span class="line">      --format string   Pretty-print images using a Go template		# 根据提供的条件筛选输出</span><br><span class="line">      --no-trunc        Don&#x27;t truncate output		# 不要截断输出</span><br><span class="line">  -q, --quiet           Only show image IDs		# 仅显示镜像ID</span><br><span class="line">[root@node1 ~]#</span><br></pre></td></tr></table></figure>
</li>
<li><p>docker search</p>
<blockquote>
<p>搜索镜像命令</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker search nginx</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">镜像名称						    描述											   星星		正式的		自动化</span></span><br><span class="line">NAME                              DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED</span><br><span class="line">nginx                             Official build of Nginx.                        15928     [OK]</span><br><span class="line">jwilder/nginx-proxy               Automated Nginx reverse proxy for docker con…   2101                 [OK]</span><br><span class="line">richarvey/nginx-php-fpm           Container running Nginx + PHP-FPM capable of…   820                  [OK]</span><br><span class="line">jc21/nginx-proxy-manager          Docker container for managing Nginx proxy ho…   288</span><br><span class="line">linuxserver/nginx                 An Nginx container, brought to you by LinuxS…   160</span><br><span class="line">tiangolo/nginx-rtmp               Docker image with Nginx using the nginx-rtmp…   147                  [OK]</span><br><span class="line">jlesage/nginx-proxy-manager       Docker container for Nginx Proxy Manager        145                  [OK]</span><br><span class="line">alfg/nginx-rtmp                   NGINX, nginx-rtmp-module and FFmpeg from sou…   111                  [OK]</span><br><span class="line">nginxdemos/hello                  NGINX webserver that serves a simple page co…   79                   [OK]</span><br><span class="line">privatebin/nginx-fpm-alpine       PrivateBin running on an Nginx, php-fpm &amp; Al…   61                   [OK]</span><br><span class="line">nginx/nginx-ingress               NGINX and  NGINX Plus Ingress Controllers fo…   57</span><br><span class="line">nginxinc/nginx-unprivileged       Unprivileged NGINX Dockerfiles                  55</span><br><span class="line">nginxproxy/nginx-proxy            Automated Nginx reverse proxy for docker con…   29</span><br><span class="line">staticfloat/nginx-certbot         Opinionated setup for automatic TLS certs lo…   25                   [OK]</span><br><span class="line">nginx/nginx-prometheus-exporter   NGINX Prometheus Exporter for NGINX and NGIN…   22</span><br><span class="line">schmunk42/nginx-redirect          A very simple container to redirect HTTP tra…   19                   [OK]</span><br><span class="line">centos/nginx-112-centos7          Platform for running nginx 1.12 or building …   16</span><br><span class="line">centos/nginx-18-centos7           Platform for running nginx 1.8 or building n…   13</span><br><span class="line">bitwarden/nginx                   The Bitwarden nginx web server acting as a r…   11</span><br><span class="line">flashspys/nginx-static            Super Lightweight Nginx Image                   11                   [OK]</span><br><span class="line">mailu/nginx                       Mailu nginx frontend                            9                    [OK]</span><br><span class="line">sophos/nginx-vts-exporter         Simple server that scrapes Nginx vts stats a…   7                    [OK]</span><br><span class="line">ansibleplaybookbundle/nginx-apb   An APB to deploy NGINX                          3                    [OK]</span><br><span class="line">wodby/nginx                       Generic nginx                                   1                    [OK]</span><br><span class="line">arnau/nginx-gate                  Docker image with Nginx with Lua enabled on …   1                    [OK]</span><br><span class="line"></span><br><span class="line">[root@node1 ~]# docker search --help</span><br><span class="line"></span><br><span class="line">Usage:  docker search [OPTIONS] TERM</span><br><span class="line"></span><br><span class="line">Search the Docker Hub for images</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -f, --filter filter   Filter output based on conditions provided		# 根据提供的条件筛选输出</span><br><span class="line">      --format string   Pretty-print search using a Go template</span><br><span class="line">      --limit int       Max number of search results (default 25)	# 最大搜索结果数（默认值25）</span><br><span class="line">      --no-trunc        Don&#x27;t truncate output		# 不要截断输出</span><br><span class="line">      </span><br><span class="line">[root@node1 ~]# docker search tomcat -f STARS=1000		# 根据条件进行筛选</span><br><span class="line">NAME      DESCRIPTION                                     STARS     OFFICIAL   AUTOMATED</span><br><span class="line">tomcat    Apache Tomcat is an open source implementati…   3193      [OK]</span><br><span class="line">[root@node1 ~]#</span><br></pre></td></tr></table></figure>
</li>
<li><p>docker pull</p>
<blockquote>
<p>下载镜像</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker pull</span><br><span class="line">&quot;docker pull&quot; requires exactly 1 argument.</span><br><span class="line">See &#x27;docker pull --help&#x27;.</span><br><span class="line"></span><br><span class="line">Usage:  docker pull [OPTIONS] NAME[:TAG|@DIGEST]</span><br><span class="line"></span><br><span class="line">Pull an image or a repository from a registry</span><br><span class="line"></span><br><span class="line">[root@node1 ~]# docker pull --help</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">用法: docker pull [选项] NAME[:Tag|@DIGEST]		<span class="comment"># []表示可选可不选</span></span> </span><br><span class="line">Usage:  docker pull [OPTIONS] NAME[:TAG|@DIGEST]</span><br><span class="line"></span><br><span class="line">Pull an image or a repository from a registry</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -a, --all-tags                Download all tagged images in the repository	# 下载存储库中所有标记的镜像</span><br><span class="line">      --disable-content-trust   Skip image verification (default true) # 跳过镜像验证（默认为开启）</span><br><span class="line">      							# 如果服务器支持多平台，则设置平台</span><br><span class="line">      --platform string         Set platform if server is multi-platform capable</span><br><span class="line">  -q, --quiet                   Suppress verbose output	# 抑制详细输出</span><br><span class="line">  </span><br><span class="line">[root@node1 ~]#</span><br><span class="line">[root@node1 ~]# docker pull mysql</span><br><span class="line">Using default tag: latest		# 使用默认标记：最新</span><br><span class="line">latest: Pulling from library/mysql	# 最新版本：从库/mysql中提取</span><br><span class="line">ffbb094f4f9e: Pull complete			# 分层下载，Docker的核心，联合文件系统</span><br><span class="line">df186527fc46: Pull complete	</span><br><span class="line">fa362a6aa7bd: Pull complete</span><br><span class="line">5af7cb1a200e: Pull complete</span><br><span class="line">949da226cc6d: Pull complete</span><br><span class="line">bce007079ee9: Pull complete</span><br><span class="line">eab9f076e5a3: Pull complete</span><br><span class="line">8a57a7529e8d: Pull complete</span><br><span class="line">b1ccc6ed6fc7: Pull complete</span><br><span class="line">b4af75e64169: Pull complete</span><br><span class="line">3aed6a9cd681: Pull complete</span><br><span class="line">23390142f76f: Pull complete</span><br><span class="line">Digest: sha256:ff9a288d1ecf4397967989b5d1ec269f7d9042a46fc8bc2c3ae35458c1a26727	# 摘要校验</span><br><span class="line">Status: Downloaded newer image for mysql:latest		# 状态：已下载mysql的较新镜像：最新</span><br><span class="line">docker.io/library/mysql:latest		# 真实地址</span><br><span class="line">[root@node1 ~]#</span><br><span class="line">[root@node1 ~]# docker pull mysql:5.7	# 指定版本下载,一定是官方有支持的版本！</span><br><span class="line">5.7: Pulling from library/mysql</span><br><span class="line">ffbb094f4f9e: Already exists		# Already exists表示已经存在</span><br><span class="line">df186527fc46: Already exists</span><br><span class="line">fa362a6aa7bd: Already exists</span><br><span class="line">5af7cb1a200e: Already exists</span><br><span class="line">949da226cc6d: Already exists</span><br><span class="line">bce007079ee9: Already exists</span><br><span class="line">eab9f076e5a3: Already exists</span><br><span class="line">c7b24c3f27af: Pull complete</span><br><span class="line">6fc26ff6705a: Downloading [=============&gt;                                     ]   29.4MB/108.6MB</span><br><span class="line">6fc26ff6705a: Pull complete</span><br><span class="line">bec5cdb5e7f7: Pull complete</span><br><span class="line">6c1cb25f7525: Pull complete</span><br><span class="line">Digest: sha256:d1cc87a3bd5dc07defc837bc9084f748a130606ff41923f46dec1986e0dc828d</span><br><span class="line">Status: Downloaded newer image for mysql:5.7</span><br><span class="line">docker.io/library/mysql:5.7</span><br><span class="line">[root@node1 ~]#</span><br></pre></td></tr></table></figure>
</li>
<li><p>docker images</p>
<blockquote>
<p>查看本机镜像</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker images</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">存储库		<span class="comment">#标签		#镜像ID		  # 创建时间		# 大小</span></span></span><br><span class="line">REPOSITORY    TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">mysql         5.7       738e7101490b   8 days ago     448MB</span><br><span class="line">mysql         latest    bbf6571db497   8 days ago     516MB</span><br><span class="line">hello-world   latest    feb5d9fea6a5   2 months ago   13.3kB</span><br><span class="line">[root@node1 ~]#</span><br><span class="line">[root@node1 ~]# docker images --help</span><br><span class="line"></span><br><span class="line">Usage:  docker images [OPTIONS] [REPOSITORY[:TAG]]</span><br><span class="line"></span><br><span class="line">List images</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">						# 显示所有镜像（默认隐藏中间镜像）</span><br><span class="line">  -a, --all             Show all images (default hides intermediate images)</span><br><span class="line">      --digests         Show digests	# 显示摘要</span><br><span class="line">  -f, --filter filter   Filter output based on conditions provided	# 根据提供的条件筛选输出</span><br><span class="line">      --format string   Pretty-print images using a Go template	# 使用Go模板打印镜像</span><br><span class="line">      --no-trunc        Don&#x27;t truncate output		# 不要截断输出</span><br><span class="line">  -q, --quiet           Only show image IDs		# 仅显示镜像ID</span><br><span class="line">  </span><br></pre></td></tr></table></figure>
</li>
<li><p>docker rmi</p>
<blockquote>
<p>删除镜像</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker images	# 查询镜像</span><br><span class="line">REPOSITORY    TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">mysql         5.7       738e7101490b   8 days ago     448MB</span><br><span class="line">mysql         latest    bbf6571db497   8 days ago     516MB</span><br><span class="line">hello-world   latest    feb5d9fea6a5   2 months ago   13.3kB</span><br><span class="line">[root@node1 ~]# docker rmi 738	# 删除镜像id为738开头的</span><br><span class="line">Untagged: mysql:5.7</span><br><span class="line">Untagged: mysql@sha256:d1cc87a3bd5dc07defc837bc9084f748a130606ff41923f46dec1986e0dc828d</span><br><span class="line">Deleted: sha256:738e7101490b45decf606211a5437ed87aa6a82f1ff03c354564bf9375ce20f9</span><br><span class="line">Deleted: sha256:addad8cfeac97b96eb6652a576269346ac96def9a6709ed2388e24fff4345837</span><br><span class="line">Deleted: sha256:e288c3439a7e2f423f50bf22979a759371c51a70bbbaa450993c336978460b1a</span><br><span class="line">Deleted: sha256:33ece15accaa3bb20e3dee84e2e4501469b917c3abba3d5475cd1fec8bb3e82c</span><br><span class="line">Deleted: sha256:6b15390bceeca8424d82e75f5c9aca5eb4693f96849d6382168a99747877693d</span><br><span class="line">[root@node1 ~]# docker images		# 查询镜像发现镜像id738开头的mysql5.7已经被删除了</span><br><span class="line">REPOSITORY    TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">mysql         latest    bbf6571db497   8 days ago     516MB</span><br><span class="line">hello-world   latest    feb5d9fea6a5   2 months ago   13.3kB</span><br><span class="line">[root@node1 ~]#</span><br><span class="line">[root@node1 ~]# docker rmi --help</span><br><span class="line"></span><br><span class="line">Usage:  docker rmi [OPTIONS] IMAGE [IMAGE...]</span><br><span class="line"></span><br><span class="line">Remove one or more images</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -f, --force      Force removal of the image	# 强制删除镜像</span><br><span class="line">      --no-prune   Do not delete untagged parents	# 不要删除未标记的父项</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">批量删除所有镜像 $(将查询出镜像作为rmi的输入)</span></span><br><span class="line">[root@node1 ~]# docker rmi -f $(docker images -qa)</span><br><span class="line">Untagged: mysql:latest</span><br><span class="line">Untagged: mysql@sha256:ff9a288d1ecf4397967989b5d1ec269f7d9042a46fc8bc2c3ae35458c1a26727</span><br><span class="line">Deleted: sha256:bbf6571db4977fe13c3f4e6289c1409fc6f98c2899eabad39bfe07cad8f64f67</span><br><span class="line">Deleted: sha256:a72da99dce60d6f8d4c4cffa4173153c990537fcdfaa27c35324c3348d55dd5c</span><br><span class="line">Deleted: sha256:8b535d432ef2fbd45d93958347b2587c5cbe334f07d6909ad9d2d480ebbafb65</span><br><span class="line">Deleted: sha256:14d13a3b33fc76839f156cd24b4636dab121e6d3d026cefa2985a4b89e9d4df8</span><br><span class="line">Deleted: sha256:77c21a5a897a1ba752f3d742d6c94ee7c6b0e373fd0aeecc4bf88b9a3982007e</span><br><span class="line">Deleted: sha256:189162becec8bb4588c54fb4ea7e62d20121812e68aeb0291fb4bb5df9ec0985</span><br><span class="line">Deleted: sha256:34980dadfd6a5bb9d7f9e8d4e408000e0a8f4840cc7d3092dc94357ebe7a89b6</span><br><span class="line">Deleted: sha256:15b2beb64a91785c8f3709ecd2410d13577b3174faad164524434ce6a7633506</span><br><span class="line">Deleted: sha256:e38dd14d47b61171927ea4b928f7296123b65a81ad1cfde8f5d00cadf1e81bbb</span><br><span class="line">Deleted: sha256:865abdfd8444741f581ce582e4ac5746c4a00c282febf65aa808a235ec7abf78</span><br><span class="line">Deleted: sha256:b1e35233e1ac953bd06fc8fa83afb3a88c39c1aeae0c89a46cb1b652d6821b38</span><br><span class="line">Deleted: sha256:3bcfdf6641227ff63e3ddf9e38e45cf317b178a50a664e45c6ae596107d5bc46</span><br><span class="line">Deleted: sha256:f11bbd657c82c45cc25b0533ce72f193880b630352cc763ed0c045c808ff9ae1</span><br><span class="line">Untagged: hello-world:latest</span><br><span class="line">Untagged: hello-world@sha256:cc15c5b292d8525effc0f89cb299f1804f3a725c8d05e158653a563f15e4f685</span><br><span class="line">Deleted: sha256:feb5d9fea6a5e9606aa995e879d862b825965ba48de054caab5ef356dc6b3412</span><br><span class="line">[root@node1 ~]#</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">删除多个镜像</span></span><br><span class="line">[root@node1 ~]# docker rmi 镜像id1 镜像id2 ...</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="容器命令"><a href="#容器命令" class="headerlink" title="容器命令"></a>容器命令</h2><blockquote>
<p>在创建容器之前，得先下载一个镜像</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker pull centos</span><br><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/centos</span><br><span class="line">a1d0c7532777: Pull complete</span><br><span class="line">Digest: sha256:a27fd8080b517143cbbbab9dfb7c8571c40d67d534bbdee55bd6c473f432b177</span><br><span class="line">Status: Downloaded newer image for centos:latest</span><br><span class="line">docker.io/library/centos:latest</span><br><span class="line">[root@node1 ~]#</span><br></pre></td></tr></table></figure>

<ul>
<li><p>docker run</p>
<blockquote>
<p>运行容器</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker run --help</span><br><span class="line"></span><br><span class="line">Usage:  docker run [OPTIONS] IMAGE [COMMAND] [ARG...]</span><br><span class="line"></span><br><span class="line">Run a command in a new container</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">      --add-host list                  Add a custom host-to-IP mapping (host:ip)	# 添加自定义主机到IP映射（主机：IP）</span><br><span class="line">  -a, --attach list                    Attach to STDIN, STDOUT or STDERR	# 连接到标准输入、标准输出或标准输出</span><br><span class="line">  									   # 块IO（相对权重），介于10和1000之间，或0禁用（默认为0）</span><br><span class="line">      --blkio-weight uint16            Block IO (relative weight), between 10 and 1000, or 0 to disable (default 0)</span><br><span class="line">      								   # 块IO权重（相对设备权重）（默认值[]）</span><br><span class="line">      --blkio-weight-device list       Block IO weight (relative device weight) (default [])</span><br><span class="line">      --cap-add list                   Add Linux capabilities	# 添加Linux功能</span><br><span class="line">      --cap-drop list                  Drop Linux capabilities	# 放弃Linux功能</span><br><span class="line">      --cgroup-parent string           Optional parent cgroup for the container		# 容器的可选父cgroup</span><br><span class="line">      --cgroupns string                Cgroup namespace to use (host|private)	# 要使用的Cgroup命名空间（主机|专用）</span><br><span class="line">      								   # 在Docker主机的cgroup命名空间中运行容器</span><br><span class="line">                                       &#x27;host&#x27;:    Run the container in the Docker host&#x27;s cgroup namespace</span><br><span class="line">                                       # 在其自己的私有cgroup命名空间中运行容器</span><br><span class="line">                                       &#x27;private&#x27;: Run the container in its own private cgroup namespace</span><br><span class="line">                                       # 使用由配置的cgroup命名空间守护进程上的默认cgroupns模式选项（默认）</span><br><span class="line">                                       &#x27;&#x27;:        Use the cgroup namespace as configured by the</span><br><span class="line">                                                  default-cgroupns-mode option on the daemon (default)</span><br><span class="line">      --cidfile string                 Write the container ID to the file	# 将容器ID写入文件</span><br><span class="line">      								   # 限制CPU CFS（完全公平调度程序）周期</span><br><span class="line">      --cpu-period int                 Limit CPU CFS (Completely Fair Scheduler) period</span><br><span class="line">      								   # 限制CPU CFS（完全公平调度程序）配额</span><br><span class="line">      --cpu-quota int                  Limit CPU CFS (Completely Fair Scheduler) quota</span><br><span class="line">      								   # 以微秒为单位限制CPU实时周期</span><br><span class="line">      --cpu-rt-period int              Limit CPU real-time period in microseconds</span><br><span class="line">      								   # 以微秒为单位限制CPU实时运行时间</span><br><span class="line">      --cpu-rt-runtime int             Limit CPU real-time runtime in microseconds</span><br><span class="line">  -c, --cpu-shares int                 CPU shares (relative weight)		# CPU份额（相对权重）</span><br><span class="line">      --cpus decimal                   Number of CPUs	# CPU数量</span><br><span class="line">      --cpuset-cpus string             CPUs in which to allow execution (0-3, 0,1)		# 允许执行的CPU（0-3,0,1）</span><br><span class="line">      --cpuset-mems string             MEMs in which to allow execution (0-3, 0,1)		# 允许执行的MEMs（0-3,0,1）</span><br><span class="line">  -d, --detach                         Run container in background and print container ID	# 在后台运行容器并打印容器ID</span><br><span class="line">  									   # 覆盖用于分离容器的键序列</span><br><span class="line">      --detach-keys string             Override the key sequence for detaching a container</span><br><span class="line">      								   # 将主机设备添加到容器中</span><br><span class="line">      --device list                    Add a host device to the container</span><br><span class="line">      								   # 将规则添加到cgroup allowed devices列表</span><br><span class="line">      --device-cgroup-rule list        Add a rule to the cgroup allowed devices list</span><br><span class="line">      								   # 限制设备的读取速率（每秒字节数）（默认值[]）</span><br><span class="line">      --device-read-bps list           Limit read rate (bytes per second) from a device (default [])</span><br><span class="line">      								   # 限制设备的读取速率（IO/秒）（默认值[]）</span><br><span class="line">      --device-read-iops list          Limit read rate (IO per second) from a device (default [])</span><br><span class="line">      								   # 限制对设备的写入速率（每秒字节数）（默认值[]）</span><br><span class="line">      --device-write-bps list          Limit write rate (bytes per second) to a device (default [])</span><br><span class="line">      								   # 限制对设备的写入速率（IO/秒）（默认值[]）</span><br><span class="line">      --device-write-iops list         Limit write rate (IO per second) to a device (default [])</span><br><span class="line">      								   # 跳过镜像验证（默认为开启）</span><br><span class="line">      --disable-content-trust          Skip image verification (default true)</span><br><span class="line">      --dns list                       Set custom DNS servers	# 设置自定义DNS服务器</span><br><span class="line">      --dns-option list                Set DNS options	# 设置DNS选项</span><br><span class="line">      --dns-search list                Set custom DNS search domains	# 设置自定义DNS搜索域</span><br><span class="line">      --domainname string              Container NIS domain name		# 容器NIS域名</span><br><span class="line">      --entrypoint string              Overwrite the default ENTRYPOINT of the image		# 覆盖图像的默认入口点</span><br><span class="line">  -e, --env list                       Set environment variables		# 设置环境变量</span><br><span class="line">      --env-file list                  Read in a file of environment variables		# 读入环境变量文件</span><br><span class="line">      --expose list                    Expose a port or a range of ports	# 公开一个端口或一系列端口</span><br><span class="line">      								   # 要添加到容器中的GPU设备（“全部”用于传递所有GPU）</span><br><span class="line">      --gpus gpu-request               GPU devices to add to the container (&#x27;all&#x27; to pass all GPUs)</span><br><span class="line">      --group-add list                 Add additional groups to join		# 添加要加入的其他组</span><br><span class="line">      --health-cmd string              Command to run to check health		# 要运行以检查运行状况的命令</span><br><span class="line">      								   # 运行检查之间的时间（ms | s | m | h）（默认为0秒）</span><br><span class="line">      --health-interval duration       Time between running the check (ms|s|m|h) (default 0s)	</span><br><span class="line">      --health-retries int             Consecutive failures needed to report unhealthy	# 需要报告连续故障</span><br><span class="line">      --health-start-period duration   Start period for the container to initialize before starting health-retries countdown (ms|s|m|h) (default 0s)				# 开始运行状况重试倒计时之前要初始化的容器的开始时间（ms | s | m | h）（默认为0s）</span><br><span class="line">      								   # 允许运行一次检查的最长时间（ms | s | m | h）（默认为0秒）</span><br><span class="line">      --health-timeout duration        Maximum time to allow one check to run (ms|s|m|h) (default 0s)</span><br><span class="line">      --help                           Print usage	# 打印使用帮助</span><br><span class="line">  -h, --hostname string                Container host name		# 容器主机名</span><br><span class="line">  									   # 在容器内运行一个init，它转发信号并接收进程</span><br><span class="line">      --init                           Run an init inside the container that forwards signals and reaps processes</span><br><span class="line">      								   # 即使未连接，也保持标准输入打开</span><br><span class="line">  -i, --interactive                    Keep STDIN open even if not attached</span><br><span class="line">      --ip string                      IPv4 address (e.g., 172.30.100.104)		# IPv4地址（例如172.30.100.104）</span><br><span class="line">      --ip6 string                     IPv6 address (e.g., 2001:db8::33)		# IPv6地址（例如，2001:db8:：33）</span><br><span class="line">      --ipc string                     IPC mode to use		# 要使用的IPC模式</span><br><span class="line">      --isolation string               Container isolation technology	# 容器隔离技术</span><br><span class="line">      --kernel-memory bytes            Kernel memory limit		# 内核内存限制</span><br><span class="line">  -l, --label list                     Set meta data on a container		# 在容器上设置元数据</span><br><span class="line">      --label-file list                Read in a line delimited file of labels		# 读入以行分隔的标签文件</span><br><span class="line">      --link list                      Add link to another container		# 添加指向另一个容器的链接</span><br><span class="line">      --link-local-ip list             Container IPv4/IPv6 link-local addresses		# 容器IPv4/IPv6链路本地地址</span><br><span class="line">      --log-driver string              Logging driver for the container		# 容器的日志记录驱动程序</span><br><span class="line">      --log-opt list                   Log driver options		# 日志驱动程序选项</span><br><span class="line">      --mac-address string             Container MAC address (e.g., 92:d0:c6:0a:29:33)	# 容器MAC地址（例如，92:d0:c6:0a:29:33）</span><br><span class="line">  -m, --memory bytes                   Memory limit		# 内存限制</span><br><span class="line">      --memory-reservation bytes       Memory soft limit	# 内存软限制</span><br><span class="line">      								   # 交换限制等于内存加交换：&#x27;-1&#x27;以启用无限制交换</span><br><span class="line">      --memory-swap bytes              Swap limit equal to memory plus swap: &#x27;-1&#x27; to enable unlimited swap</span><br><span class="line">      								   # 调整容器内存交换（0到100）（默认值-1）</span><br><span class="line">      --memory-swappiness int          Tune container memory swappiness (0 to 100) (default -1)</span><br><span class="line">      --mount mount                    Attach a filesystem mount to the container	# 将文件系统装载附加到容器</span><br><span class="line">      --name string                    Assign a name to the container	# 为容器指定一个名称</span><br><span class="line">      --network network                Connect a container to a network		# 将容器连接到网络</span><br><span class="line">      --network-alias list             Add network-scoped alias for the container		# 为容器添加网络范围的别名</span><br><span class="line">      --no-healthcheck                 Disable any container-specified HEALTHCHECK		# 禁用任何指定的容器HEALTHCHECK</span><br><span class="line">      --oom-kill-disable               Disable OOM Killer	# 禁用OOM杀手</span><br><span class="line">      --oom-score-adj int              Tune host&#x27;s OOM preferences (-1000 to 1000)		# 调整主机的OOM首选项（-1000到1000）</span><br><span class="line">      --pid string                     PID namespace to use		# 要使用的PID命名空间</span><br><span class="line">      --pids-limit int                 Tune container pids limit (set -1 for unlimited)	# 调整容器pids限制（设置为-1表示无限制）</span><br><span class="line">      --platform string                Set platform if server is multi-platform capable	# 如果服务器支持多平台，则设置平台</span><br><span class="line">      --privileged                     Give extended privileges to this container		# 为此容器授予扩展权限</span><br><span class="line">  -p, --publish list                   Publish a container&#x27;s port(s) to the host		# 将容器的端口发布到主机</span><br><span class="line">  -P, --publish-all                    Publish all exposed ports to random ports		# 将所有公开端口发布到随机端口</span><br><span class="line">  									   # 运行前拉取图像（“始终”|“缺少”|“从不”）（默认为“缺少”）</span><br><span class="line">      --pull string                    Pull image before running (&quot;always&quot;|&quot;missing&quot;|&quot;never&quot;) (default &quot;missing&quot;)</span><br><span class="line">      --read-only                      Mount the container&#x27;s root filesystem as read only	# 以只读方式装载容器的根文件系统</span><br><span class="line">      								   # 容器退出时应用的重新启动策略（默认为“否”）</span><br><span class="line">      --restart string                 Restart policy to apply when a container exits (default &quot;no&quot;)</span><br><span class="line">      --rm                             Automatically remove the container when it exits		# 当容器退出时自动将其移除</span><br><span class="line">      --runtime string                 Runtime to use for this container		# 用于此容器的运行时</span><br><span class="line">      --security-opt list              Security Options		# 安全选项</span><br><span class="line">      --shm-size bytes                 Size of /dev/shm		# /dev/shm的大小</span><br><span class="line">      --sig-proxy                      Proxy received signals to the process (default true)	# 代理接收到进程的信号（默认为true）</span><br><span class="line">      --stop-signal string             Signal to stop a container (default &quot;SIGTERM&quot;)		# 停止容器的信号（默认为“SIGTERM”）</span><br><span class="line">      --stop-timeout int               Timeout (in seconds) to stop a container		# 停止容器的超时（秒）</span><br><span class="line">      --storage-opt list               Storage driver options for the container		# 容器的存储驱动程序选项</span><br><span class="line">      --sysctl map                     Sysctl options (default map[])		# Sysctl选项（默认映射[]）</span><br><span class="line">      --tmpfs list                     Mount a tmpfs directory		# 安装tmpfs</span><br><span class="line">  -t, --tty                            Allocate a pseudo-TTY		# 分配一个伪TTY</span><br><span class="line">      --ulimit ulimit                  Ulimit options (default [])	# Ulimit选项（默认值[]）</span><br><span class="line">      								   # 用户名或UID（格式：&lt;name | UID&gt;[：&lt;group | gid&gt;）</span><br><span class="line">  -u, --user string                    Username or UID (format: &lt;name|uid&gt;[:&lt;group|gid&gt;])</span><br><span class="line">      --userns string                  User namespace to use	# 要使用的用户命名空间</span><br><span class="line">      --uts string                     UTS namespace to use		# 要使用的名称空间</span><br><span class="line">  -v, --volume list                    Bind mount a volume		# 绑定并装入卷</span><br><span class="line">      --volume-driver string           Optional volume driver for the container	# 容器的可选卷驱动程序</span><br><span class="line">      --volumes-from list              Mount volumes from the specified container(s)		# 从指定容器装入卷</span><br><span class="line">  -w, --workdir string                 Working directory inside the container		# 容器内的工作目录</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">常用参数</span></span><br><span class="line">--name=&#x27;xxx&#x27;  	设置容器名称用于区分容器</span><br><span class="line">-d				后台运行</span><br><span class="line">-it				使用交互方式运行</span><br><span class="line">-p				指定容器端口 -p 8080:8080/主机端口:容器端口</span><br><span class="line">-P				随机指定端口</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">示例</span></span><br><span class="line">[root@node1 ~]# docker images</span><br><span class="line">REPOSITORY   TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">centos       latest    5d0da3dc9764   2 months ago   231MB</span><br><span class="line">[root@node1 ~]# docker run -it 5d /bin/bash</span><br><span class="line">[root@b267d2d19ef4 /]#	  					# 已经进入到容器</span><br><span class="line">[root@b267d2d19ef4 /]# exit</span><br></pre></td></tr></table></figure>
</li>
<li><p>docker ps</p>
<blockquote>
<p>列出所有运行中的容器</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker ps --help</span><br><span class="line"></span><br><span class="line">Usage:  docker ps [OPTIONS]</span><br><span class="line"></span><br><span class="line">List containers</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -a, --all             Show all containers (default shows just running)	# 显示所有容器（默认显示正在运行）</span><br><span class="line">  -f, --filter filter   Filter output based on conditions provided		# 根据提供的条件筛选输出</span><br><span class="line">      --format string   Pretty-print containers using a Go template</span><br><span class="line">      					# 显示n个上次创建的容器（包括所有状态）（默认值-1）</span><br><span class="line">  -n, --last int        Show n last created containers (includes all states) (default -1)	</span><br><span class="line">  -l, --latest          Show the latest created container (includes all states)	# 显示最新创建的容器（包括所有状态）</span><br><span class="line">      --no-trunc        Don&#x27;t truncate output	# 不要截断输出</span><br><span class="line">  -q, --quiet           Only display container IDs		# 仅显示容器ID</span><br><span class="line">  -s, --size            Display total file sizes		# 显示总文件大小</span><br><span class="line">[root@node1 ~]# docker ps -a</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">容器ID		 <span class="comment">#镜像		# 命令		# 创建时间		  # 状态						# 端口	 # 容器名称</span></span></span><br><span class="line">CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS                      PORTS     NAMES</span><br><span class="line">fe8edecbd757   centos    &quot;/bin/bash&quot;   13 seconds ago   Exited (0) 11 seconds ago             mystifying_satoshi</span><br><span class="line">2c3fb40f1d3e   centos    &quot;/bin/bash&quot;   6 minutes ago    Up 3 minutes                          exciting_morse</span><br></pre></td></tr></table></figure>
</li>
<li><p>退出容器</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">exit #直接退出容器</span><br><span class="line">Ctrl + q + p #不停止容器并退出</span><br></pre></td></tr></table></figure>
</li>
<li><p>docker rm</p>
<blockquote>
<p>删除容器</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker rm --help</span><br><span class="line"></span><br><span class="line">Usage:  docker rm [OPTIONS] CONTAINER [CONTAINER...]</span><br><span class="line"></span><br><span class="line">Remove one or more containers</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">				  # 强制移除正在运行的容器（使用SIGKILL）</span><br><span class="line">  -f, --force     Force the removal of a running container (uses SIGKILL)</span><br><span class="line">  -l, --link      Remove the specified link	# 删除指定的链接</span><br><span class="line">  -v, --volumes   Remove anonymous volumes associated with the container # 删除与容器关联的匿名卷</span><br><span class="line"></span><br><span class="line">[root@node1 ~]# docker ps -a	# 查看所有容器</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS                     PORTS     NAMES</span><br><span class="line">fe8edecbd757   centos    &quot;/bin/bash&quot;   7 minutes ago    Exited (0) 7 minutes ago             mystifying_satoshi</span><br><span class="line">2c3fb40f1d3e   centos    &quot;/bin/bash&quot;   13 minutes ago   Up 11 minutes                        exciting_morse</span><br><span class="line">[root@node1 ~]# docker rm fe8edecbd757	# 删除一个已经停止的容器</span><br><span class="line">fe8edecbd757</span><br><span class="line">[root@node1 ~]# docker ps -a			# 再次查看发现已经被删除了</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS          PORTS     NAMES</span><br><span class="line">2c3fb40f1d3e   centos    &quot;/bin/bash&quot;   14 minutes ago   Up 11 minutes             exciting_morse</span><br><span class="line">[root@node1 ~]#</span><br></pre></td></tr></table></figure>
</li>
<li><p>容器的启动删除退出</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">docker start 容器ID		# 启动容器</span><br><span class="line">docker stop 容器ID		# 停止容器</span><br><span class="line">docker restart 容器ID		# 重启容器</span><br><span class="line">docker kill 容器ID		# 强制停止容器</span><br></pre></td></tr></table></figure>
</li>
<li><p>docker exec</p>
<blockquote>
<p>以新的TTY进入容器</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker exec --help</span><br><span class="line"></span><br><span class="line">Usage:  docker exec [OPTIONS] CONTAINER COMMAND [ARG...]</span><br><span class="line"></span><br><span class="line">Run a command in a running container</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -d, --detach               Detached mode: run command in the background	# 分离模式：在后台运行命令</span><br><span class="line">      --detach-keys string   Override the key sequence for detaching a container	# 覆盖用于分离容器的键序列</span><br><span class="line">  -e, --env list             Set environment variables	# 设置环境变量</span><br><span class="line">      --env-file list        Read in a file of environment variables	# 读入环境变量文件</span><br><span class="line">  -i, --interactive          Keep STDIN open even if not attached	# 即使未连接，也保持标准输入打开</span><br><span class="line">      --privileged           Give extended privileges to the command #  为命令授予扩展权限</span><br><span class="line">  -t, --tty                  Allocate a pseudo-TTY	# 分配一个伪TTY</span><br><span class="line">  						 	 # 用户名或UID（格式：&lt;name | UID&gt;[：&lt;group | gid&gt;）</span><br><span class="line">  -u, --user string          Username or UID (format: &lt;name|uid&gt;[:&lt;group|gid&gt;])</span><br><span class="line">  -w, --workdir string       Working directory inside the container		#  容器内的工作目录</span><br><span class="line">[root@node1 ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED             STATUS          PORTS     NAMES</span><br><span class="line">5db7847b3285   centos    &quot;/bin/bash -c &#x27;while…&quot;   25 minutes ago      Up 25 minutes             shell3</span><br><span class="line">2c3fb40f1d3e   centos    &quot;/bin/bash&quot;              About an hour ago   Up 58 minutes             exciting_morse</span><br><span class="line">[root@node1 ~]# docker exec -it 5db /bin/bash</span><br><span class="line">[root@5db7847b3285 /]#</span><br></pre></td></tr></table></figure>
</li>
<li><p>docker attach</p>
<blockquote>
<p>打开正在运行的TTY</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED             STATUS             PORTS     NAMES</span><br><span class="line">5db7847b3285   centos    &quot;/bin/bash -c &#x27;while…&quot;   34 minutes ago      Up 34 minutes                shell3</span><br><span class="line">2c3fb40f1d3e   centos    &quot;/bin/bash&quot;              About an hour ago   Up About an hour             exciting_morse</span><br><span class="line">[root@node1 ~]# docker attach 5db</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="其他命令"><a href="#其他命令" class="headerlink" title="其他命令"></a>其他命令</h2><ul>
<li><p>后台启动容器</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker -d</span><br></pre></td></tr></table></figure>
</li>
<li><p>docker log</p>
<blockquote>
<p>查看容器日志</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker logs --help</span><br><span class="line"></span><br><span class="line">Usage:  docker logs [OPTIONS] CONTAINER</span><br><span class="line"></span><br><span class="line">Fetch the logs of a container</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">      --details        Show extra details provided to logs		# 显示提供给日志的其他详细信息</span><br><span class="line">  -f, --follow         Follow log output	# 跟踪日志输出</span><br><span class="line">  					   # 显示自时间戳（例如2013-01-02T13:23:37Z）或相对时间戳（例如42分钟的42m）以来的日志</span><br><span class="line">      --since string   Show logs since timestamp (e.g. 2013-01-02T13:23:37Z) or relative (e.g. 42m for 42 minutes)</span><br><span class="line">      				   # 从日志末尾显示的行数（默认为“全部”）</span><br><span class="line">  -n, --tail string    Number of lines to show from the end of the logs (default &quot;all&quot;)</span><br><span class="line">  -t, --timestamps     Show timestamps		# 显示时间戳</span><br><span class="line">  					   # 在时间戳（例如2013-01-02T13:23:37Z）或相对时间戳（例如42分钟的42m）之前显示日志</span><br><span class="line">      --until string   Show logs before a timestamp (e.g. 2013-01-02T13:23:37Z) or relative (e.g. 42m for 42 minutes)</span><br></pre></td></tr></table></figure>
</li>
<li><p>docker top</p>
<blockquote>
<p>查看容器进程</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS     NAMES</span><br><span class="line">5db7847b3285   centos    &quot;/bin/bash -c &#x27;while…&quot;   3 minutes ago    Up 3 minutes              shell3</span><br><span class="line">2c3fb40f1d3e   centos    &quot;/bin/bash&quot;              39 minutes ago   Up 36 minutes             exciting_morse</span><br><span class="line">[root@node1 ~]# docker top 5db</span><br><span class="line">UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD</span><br><span class="line">root                10825               10804               0                   22:08               ?                   </span><br><span class="line">root                11202               10825               0                   22:12               ?                   </span><br><span class="line">[root@node1 ~]#</span><br></pre></td></tr></table></figure>
</li>
<li><p>docker inspect</p>
<blockquote>
<p>查看容器元数据</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker inspect --help</span><br><span class="line"></span><br><span class="line">Usage:  docker inspect [OPTIONS] NAME|ID [NAME|ID...]</span><br><span class="line"></span><br><span class="line">Return low-level information on Docker objects</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -f, --format string   Format the output using the given Go template</span><br><span class="line">  -s, --size            Display total file sizes if the type is container		# 如果类型为容器，则显示总文件大小</span><br><span class="line">      --type string     Return JSON for specified type		# 返回指定类型的JSON</span><br><span class="line">[root@node1 ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS     NAMES</span><br><span class="line">5db7847b3285   centos    &quot;/bin/bash -c &#x27;while…&quot;   8 minutes ago    Up 8 minutes              shell3</span><br><span class="line">2c3fb40f1d3e   centos    &quot;/bin/bash&quot;              43 minutes ago   Up 40 minutes             exciting_morse</span><br><span class="line">[root@node1 ~]# docker inspect 5db</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;Id&quot;: &quot;5db7847b3285ebb0bc78785808ed597f85c5476e84d24541cc5d135abc199bc2&quot;,		</span><br><span class="line">        &quot;Created&quot;: &quot;2021-12-11T14:08:37.31918904Z&quot;,		</span><br><span class="line">        &quot;Path&quot;: &quot;/bin/bash&quot;,	</span><br><span class="line">        &quot;Args&quot;: [</span><br><span class="line">            &quot;-c&quot;,</span><br><span class="line">            &quot;while true;do echo hhhh;sleep 1;done&quot;</span><br><span class="line">        ],</span><br><span class="line">        &quot;State&quot;: &#123;</span><br><span class="line">            &quot;Status&quot;: &quot;running&quot;,</span><br><span class="line">            &quot;Running&quot;: true,</span><br><span class="line">            &quot;Paused&quot;: false,</span><br><span class="line">            &quot;Restarting&quot;: false,</span><br><span class="line">            &quot;OOMKilled&quot;: false,</span><br><span class="line">            &quot;Dead&quot;: false,</span><br><span class="line">            &quot;Pid&quot;: 10825,</span><br><span class="line">            &quot;ExitCode&quot;: 0,</span><br><span class="line">            &quot;Error&quot;: &quot;&quot;,</span><br><span class="line">            &quot;StartedAt&quot;: &quot;2021-12-11T14:08:37.712499657Z&quot;,</span><br><span class="line">            &quot;FinishedAt&quot;: &quot;0001-01-01T00:00:00Z&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Image&quot;: &quot;sha256:5d0da3dc976460b72c77d94c8a1ad043720b0416bfc16c52c45d4847e53fadb6&quot;,</span><br><span class="line">        &quot;ResolvConfPath&quot;: &quot;/var/lib/docker/containers/5db7847b3285ebb0bc78785808ed597f85c5476e84d24541cc5d135abc199bc2/resolv.conf&quot;,</span><br><span class="line">        &quot;HostnamePath&quot;: &quot;/var/lib/docker/containers/5db7847b3285ebb0bc78785808ed597f85c5476e84d24541cc5d135abc199bc2/hostname&quot;,</span><br><span class="line">        &quot;HostsPath&quot;: &quot;/var/lib/docker/containers/5db7847b3285ebb0bc78785808ed597f85c5476e84d24541cc5d135abc199bc2/hosts&quot;,</span><br><span class="line">        &quot;LogPath&quot;: &quot;/var/lib/docker/containers/5db7847b3285ebb0bc78785808ed597f85c5476e84d24541cc5d135abc199bc2/5db7847b3285ebb0bc78785808ed597f85c5476e84d24541cc5d135abc199bc2-json.log&quot;,</span><br><span class="line">        &quot;Name&quot;: &quot;/shell3&quot;,</span><br><span class="line">        &quot;RestartCount&quot;: 0,</span><br><span class="line">        &quot;Driver&quot;: &quot;overlay2&quot;,</span><br><span class="line">        &quot;Platform&quot;: &quot;linux&quot;,</span><br><span class="line">        &quot;MountLabel&quot;: &quot;&quot;,</span><br><span class="line">        &quot;ProcessLabel&quot;: &quot;&quot;,</span><br><span class="line">        &quot;AppArmorProfile&quot;: &quot;&quot;,</span><br><span class="line">        &quot;ExecIDs&quot;: null,</span><br><span class="line">        &quot;HostConfig&quot;: &#123;</span><br><span class="line">            &quot;Binds&quot;: null,</span><br><span class="line">            &quot;ContainerIDFile&quot;: &quot;&quot;,</span><br><span class="line">            &quot;LogConfig&quot;: &#123;</span><br><span class="line">                &quot;Type&quot;: &quot;json-file&quot;,</span><br><span class="line">                &quot;Config&quot;: &#123;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;NetworkMode&quot;: &quot;default&quot;,</span><br><span class="line">            &quot;PortBindings&quot;: &#123;&#125;,</span><br><span class="line">            &quot;RestartPolicy&quot;: &#123;</span><br><span class="line">                &quot;Name&quot;: &quot;no&quot;,</span><br><span class="line">                &quot;MaximumRetryCount&quot;: 0</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;AutoRemove&quot;: false,</span><br><span class="line">            &quot;VolumeDriver&quot;: &quot;&quot;,</span><br><span class="line">            &quot;VolumesFrom&quot;: null,</span><br><span class="line">            &quot;CapAdd&quot;: null,</span><br><span class="line">            &quot;CapDrop&quot;: null,</span><br><span class="line">            &quot;CgroupnsMode&quot;: &quot;host&quot;,</span><br><span class="line">            &quot;Dns&quot;: [],</span><br><span class="line">            &quot;DnsOptions&quot;: [],</span><br><span class="line">            &quot;DnsSearch&quot;: [],</span><br><span class="line">            &quot;ExtraHosts&quot;: null,</span><br><span class="line">            &quot;GroupAdd&quot;: null,</span><br><span class="line">            &quot;IpcMode&quot;: &quot;private&quot;,</span><br><span class="line">            &quot;Cgroup&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Links&quot;: null,</span><br><span class="line">            &quot;OomScoreAdj&quot;: 0,</span><br><span class="line">            &quot;PidMode&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Privileged&quot;: false,</span><br><span class="line">            &quot;PublishAllPorts&quot;: false,</span><br><span class="line">            &quot;ReadonlyRootfs&quot;: false,</span><br><span class="line">            &quot;SecurityOpt&quot;: null,</span><br><span class="line">            &quot;UTSMode&quot;: &quot;&quot;,</span><br><span class="line">            &quot;UsernsMode&quot;: &quot;&quot;,</span><br><span class="line">            &quot;ShmSize&quot;: 67108864,</span><br><span class="line">            &quot;Runtime&quot;: &quot;runc&quot;,</span><br><span class="line">            &quot;ConsoleSize&quot;: [</span><br><span class="line">                0,</span><br><span class="line">                0</span><br><span class="line">            ],</span><br><span class="line">            &quot;Isolation&quot;: &quot;&quot;,</span><br><span class="line">            &quot;CpuShares&quot;: 0,</span><br><span class="line">            &quot;Memory&quot;: 0,</span><br><span class="line">            &quot;NanoCpus&quot;: 0,</span><br><span class="line">            &quot;CgroupParent&quot;: &quot;&quot;,</span><br><span class="line">            &quot;BlkioWeight&quot;: 0,</span><br><span class="line">            &quot;BlkioWeightDevice&quot;: [],</span><br><span class="line">            &quot;BlkioDeviceReadBps&quot;: null,</span><br><span class="line">            &quot;BlkioDeviceWriteBps&quot;: null,</span><br><span class="line">            &quot;BlkioDeviceReadIOps&quot;: null,</span><br><span class="line">            &quot;BlkioDeviceWriteIOps&quot;: null,</span><br><span class="line">            &quot;CpuPeriod&quot;: 0,</span><br><span class="line">            &quot;CpuQuota&quot;: 0,</span><br><span class="line">            &quot;CpuRealtimePeriod&quot;: 0,</span><br><span class="line">            &quot;CpuRealtimeRuntime&quot;: 0,</span><br><span class="line">            &quot;CpusetCpus&quot;: &quot;&quot;,</span><br><span class="line">            &quot;CpusetMems&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Devices&quot;: [],</span><br><span class="line">            &quot;DeviceCgroupRules&quot;: null,</span><br><span class="line">            &quot;DeviceRequests&quot;: null,</span><br><span class="line">            &quot;KernelMemory&quot;: 0,</span><br><span class="line">            &quot;KernelMemoryTCP&quot;: 0,</span><br><span class="line">            &quot;MemoryReservation&quot;: 0,</span><br><span class="line">            &quot;MemorySwap&quot;: 0,</span><br><span class="line">            &quot;MemorySwappiness&quot;: null,</span><br><span class="line">            &quot;OomKillDisable&quot;: false,</span><br><span class="line">            &quot;PidsLimit&quot;: null,</span><br><span class="line">            &quot;Ulimits&quot;: null,</span><br><span class="line">            &quot;CpuCount&quot;: 0,</span><br><span class="line">            &quot;CpuPercent&quot;: 0,</span><br><span class="line">            &quot;IOMaximumIOps&quot;: 0,</span><br><span class="line">            &quot;IOMaximumBandwidth&quot;: 0,</span><br><span class="line">            &quot;MaskedPaths&quot;: [</span><br><span class="line">                &quot;/proc/asound&quot;,</span><br><span class="line">                &quot;/proc/acpi&quot;,</span><br><span class="line">                &quot;/proc/kcore&quot;,</span><br><span class="line">                &quot;/proc/keys&quot;,</span><br><span class="line">                &quot;/proc/latency_stats&quot;,</span><br><span class="line">                &quot;/proc/timer_list&quot;,</span><br><span class="line">                &quot;/proc/timer_stats&quot;,</span><br><span class="line">                &quot;/proc/sched_debug&quot;,</span><br><span class="line">                &quot;/proc/scsi&quot;,</span><br><span class="line">                &quot;/sys/firmware&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;ReadonlyPaths&quot;: [</span><br><span class="line">                &quot;/proc/bus&quot;,</span><br><span class="line">                &quot;/proc/fs&quot;,</span><br><span class="line">                &quot;/proc/irq&quot;,</span><br><span class="line">                &quot;/proc/sys&quot;,</span><br><span class="line">                &quot;/proc/sysrq-trigger&quot;</span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;GraphDriver&quot;: &#123;</span><br><span class="line">            &quot;Data&quot;: &#123;</span><br><span class="line">                &quot;LowerDir&quot;: &quot;/var/lib/docker/overlay2/c3c47f255c9d1db61b969601df06f580012e1783c6aa2bbbbe03e9bc970d105f-init/diff:/var/lib/docker/overlay2/41ea41b839add0b7e657a3b18b47d03f209199589ea6e20e52503cce2f8d580f/diff&quot;,</span><br><span class="line">                &quot;MergedDir&quot;: &quot;/var/lib/docker/overlay2/c3c47f255c9d1db61b969601df06f580012e1783c6aa2bbbbe03e9bc970d105f/merged&quot;,</span><br><span class="line">                &quot;UpperDir&quot;: &quot;/var/lib/docker/overlay2/c3c47f255c9d1db61b969601df06f580012e1783c6aa2bbbbe03e9bc970d105f/diff&quot;,</span><br><span class="line">                &quot;WorkDir&quot;: &quot;/var/lib/docker/overlay2/c3c47f255c9d1db61b969601df06f580012e1783c6aa2bbbbe03e9bc970d105f/work&quot;</span><br><span class="line">            &#125;,</span><br><span class="line">            &quot;Name&quot;: &quot;overlay2&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;Mounts&quot;: [],</span><br><span class="line">        &quot;Config&quot;: &#123;</span><br><span class="line">            &quot;Hostname&quot;: &quot;5db7847b3285&quot;,</span><br><span class="line">            &quot;Domainname&quot;: &quot;&quot;,</span><br><span class="line">            &quot;User&quot;: &quot;&quot;,</span><br><span class="line">            &quot;AttachStdin&quot;: false,</span><br><span class="line">            &quot;AttachStdout&quot;: false,</span><br><span class="line">            &quot;AttachStderr&quot;: false,</span><br><span class="line">            &quot;Tty&quot;: false,</span><br><span class="line">            &quot;OpenStdin&quot;: false,</span><br><span class="line">            &quot;StdinOnce&quot;: false,</span><br><span class="line">            &quot;Env&quot;: [</span><br><span class="line">                &quot;PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Cmd&quot;: [</span><br><span class="line">                &quot;/bin/bash&quot;,</span><br><span class="line">                &quot;-c&quot;,</span><br><span class="line">                &quot;while true;do echo hhhh;sleep 1;done&quot;</span><br><span class="line">            ],</span><br><span class="line">            &quot;Image&quot;: &quot;centos&quot;,</span><br><span class="line">            &quot;Volumes&quot;: null,</span><br><span class="line">            &quot;WorkingDir&quot;: &quot;&quot;,</span><br><span class="line">            &quot;Entrypoint&quot;: null,</span><br><span class="line">            &quot;OnBuild&quot;: null,</span><br><span class="line">            &quot;Labels&quot;: &#123;</span><br><span class="line">                &quot;org.label-schema.build-date&quot;: &quot;20210915&quot;,</span><br><span class="line">                &quot;org.label-schema.license&quot;: &quot;GPLv2&quot;,</span><br><span class="line">                &quot;org.label-schema.name&quot;: &quot;CentOS Base Image&quot;,</span><br><span class="line">                &quot;org.label-schema.schema-version&quot;: &quot;1.0&quot;,</span><br><span class="line">                &quot;org.label-schema.vendor&quot;: &quot;CentOS&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &quot;NetworkSettings&quot;: &#123;</span><br><span class="line">            &quot;Bridge&quot;: &quot;&quot;,</span><br><span class="line">            &quot;SandboxID&quot;: &quot;a70d09048c929f2be067a98b10fb37d64287fd39d5fe0001a536fe70c8e9e002&quot;,</span><br><span class="line">            &quot;HairpinMode&quot;: false,</span><br><span class="line">            &quot;LinkLocalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">            &quot;LinkLocalIPv6PrefixLen&quot;: 0,</span><br><span class="line">            &quot;Ports&quot;: &#123;&#125;,</span><br><span class="line">            &quot;SandboxKey&quot;: &quot;/var/run/docker/netns/a70d09048c92&quot;,</span><br><span class="line">            &quot;SecondaryIPAddresses&quot;: null,</span><br><span class="line">            &quot;SecondaryIPv6Addresses&quot;: null,</span><br><span class="line">            &quot;EndpointID&quot;: &quot;8799f54ad2618d76893aeed3c1dafc959d83e63a7c153555fc0fe946d3c52ce9&quot;,</span><br><span class="line">            &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class="line">            &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">            &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class="line">            &quot;IPAddress&quot;: &quot;172.17.0.3&quot;,</span><br><span class="line">            &quot;IPPrefixLen&quot;: 16,</span><br><span class="line">            &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class="line">            &quot;MacAddress&quot;: &quot;02:42:ac:11:00:03&quot;,</span><br><span class="line">            &quot;Networks&quot;: &#123;</span><br><span class="line">                &quot;bridge&quot;: &#123;</span><br><span class="line">                    &quot;IPAMConfig&quot;: null,</span><br><span class="line">                    &quot;Links&quot;: null,</span><br><span class="line">                    &quot;Aliases&quot;: null,</span><br><span class="line">                    &quot;NetworkID&quot;: &quot;d7122c9cff979c8ad84c9d6f473ade3c87f211708febd877b1e6d5b0f50a9d79&quot;,</span><br><span class="line">                    &quot;EndpointID&quot;: &quot;8799f54ad2618d76893aeed3c1dafc959d83e63a7c153555fc0fe946d3c52ce9&quot;,</span><br><span class="line">                    &quot;Gateway&quot;: &quot;172.17.0.1&quot;,</span><br><span class="line">                    &quot;IPAddress&quot;: &quot;172.17.0.3&quot;,</span><br><span class="line">                    &quot;IPPrefixLen&quot;: 16,</span><br><span class="line">                    &quot;IPv6Gateway&quot;: &quot;&quot;,</span><br><span class="line">                    &quot;GlobalIPv6Address&quot;: &quot;&quot;,</span><br><span class="line">                    &quot;GlobalIPv6PrefixLen&quot;: 0,</span><br><span class="line">                    &quot;MacAddress&quot;: &quot;02:42:ac:11:00:03&quot;,</span><br><span class="line">                    &quot;DriverOpts&quot;: null</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line">[root@node1 ~]#</span><br></pre></td></tr></table></figure>
</li>
<li><p>docker cp</p>
<blockquote>
<p>Docker拷贝命令；用于从Docker中将文件拷贝至主机</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker cp --help</span><br><span class="line"></span><br><span class="line">Usage:  docker cp [OPTIONS] CONTAINER:SRC_PATH DEST_PATH|-</span><br><span class="line">        docker cp [OPTIONS] SRC_PATH|- CONTAINER:DEST_PATH</span><br><span class="line"></span><br><span class="line">Copy files/folders between a container and the local filesystem</span><br><span class="line"></span><br><span class="line">Use &#x27;-&#x27; as the source to read a tar archive from stdin</span><br><span class="line">and extract it to a directory destination in a container.</span><br><span class="line">Use &#x27;-&#x27; as the destination to stream a tar archive of a</span><br><span class="line">container source to stdout.</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -a, --archive       Archive mode (copy all uid/gid information)   # 存档模式（复制所有uid/gid信息）</span><br><span class="line">  -L, --follow-link   Always follow symbol link in SRC_PATH		# 始终遵循SRC_路径中的符号链接</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">使用示例</span></span><br><span class="line">[root@node1 ~]# docker ps -a		# 查看历史容器</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED       STATUS                        PORTS     NAMES</span><br><span class="line">5db7847b3285   centos    &quot;/bin/bash -c &#x27;while…&quot;   2 hours ago   Exited (137) 11 minutes ago             shell3</span><br><span class="line">df37e27d97c6   centos    &quot;/bin/sh -C &#x27;while t…&quot;   2 hours ago   Exited (127) 2 hours ago                shell2</span><br><span class="line">6e442975e003   centos    &quot;/bin/bash -C &#x27;while…&quot;   2 hours ago   Exited (127) 2 hours ago                shell</span><br><span class="line">2c3fb40f1d3e   centos    &quot;/bin/bash&quot;              3 hours ago   Exited (0) 52 seconds ago               exciting_morse</span><br><span class="line">[root@node1 ~]# docker start -a -i 2c	# 运行容器</span><br><span class="line">[root@2c3fb40f1d3e /]# echo hello,world &gt; /root/xiaowangc</span><br><span class="line">[root@2c3fb40f1d3e /]# ls /root/</span><br><span class="line">abc  anaconda-ks.cfg  anaconda-post.log  original-ks.cfg  xiaowangc</span><br><span class="line">[root@2c3fb40f1d3e /]# 		# 使用ctrl q p 退出</span><br><span class="line">[root@node1 ~]# docker ps	# 查看容器还在运行</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND       CREATED       STATUS              PORTS     NAMES</span><br><span class="line">2c3fb40f1d3e   centos    &quot;/bin/bash&quot;   3 hours ago   Up About a minute             exciting_morse</span><br><span class="line">[root@node1 ~]# ls</span><br><span class="line">anaconda-ks.cfg  initial-setup-ks.cfg</span><br><span class="line">[root@node1 ~]# docker cp 2c:/root/xiaowangc ./</span><br><span class="line">[root@node1 ~]# ls</span><br><span class="line">anaconda-ks.cfg  initial-setup-ks.cfg  xiaowangc</span><br><span class="line">[root@node1 ~]# cat xiaowangc</span><br><span class="line">hello,world</span><br><span class="line">[root@node1 ~]#</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">如果需要将主机文件考至容器 即: docker <span class="built_in">cp</span> 主机文件 容器：路径</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="Docker-commit"><a href="#Docker-commit" class="headerlink" title="Docker commit"></a>Docker commit</h2><blockquote>
<p>从容器创建一个新的镜像</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker commit</span><br><span class="line">&quot;docker commit&quot; requires at least 1 and at most 2 arguments.</span><br><span class="line">See &#x27;docker commit --help&#x27;.</span><br><span class="line"></span><br><span class="line">Usage:  docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]</span><br><span class="line"></span><br><span class="line">Create a new image from a container&#x27;s changes</span><br><span class="line">[root@node1 ~]# docker commit --help</span><br><span class="line"></span><br><span class="line">Usage:  docker commit [OPTIONS] CONTAINER [REPOSITORY[:TAG]]</span><br><span class="line"></span><br><span class="line">Create a new image from a container&#x27;s changes</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">						 # 作者（例如，“约翰·汉尼拔·史密斯&lt;hannibal@a-team.com&gt;）</span><br><span class="line">  -a, --author string    Author (e.g., &quot;John Hannibal Smith &lt;hannibal@a-team.com&gt;&quot;)</span><br><span class="line">  						 # 将Dockerfile指令应用于创建的镜像</span><br><span class="line">  -c, --change list      Apply Dockerfile instruction to the created image</span><br><span class="line">  -m, --message string   Commit message		# 提交消息</span><br><span class="line">  -p, --pause            Pause container during commit (default true)		# 提交期间暂停容器（默认为true）</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker pull tomcat</span><br><span class="line">[root@node1 ~]# docker images</span><br><span class="line">REPOSITORY      TAG       IMAGE ID       CREATED        SIZE</span><br><span class="line">tomcat          latest    24207ccc9cce   3 days ago     680MB</span><br><span class="line">centos          latest    5d0da3dc9764   2 months ago   231MB</span><br><span class="line">elasticsearch   latest    5acf0e8da90b   3 years ago    486MB</span><br><span class="line">[root@node1 ~]# docker run -d -P 24</span><br><span class="line">efa6bf9baf159b64b4b82d5f7d3330d6f83eddfe834d88ea8af21570ddb74ab4</span><br><span class="line">[root@node1 ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND             CREATED          STATUS          PORTS                                         NAMES</span><br><span class="line">efa6bf9baf15   24        &quot;catalina.sh run&quot;   28 seconds ago   Up 27 seconds   0.0.0.0:49154-&gt;8080/tcp, :::49154-&gt;8080/tcp   hungry_zhukovsky</span><br><span class="line">[root@node1 ~]# docker exec -it efa /bin/bash</span><br><span class="line">root@efa6bf9baf15:/usr/local/tomcat# ls</span><br><span class="line">BUILDING.txt     LICENSE  README.md      RUNNING.txt  conf  logs            temp     webapps.dist</span><br><span class="line">CONTRIBUTING.md  NOTICE   RELEASE-NOTES  bin          lib   native-jni-lib  webapps  work</span><br><span class="line">root@efa6bf9baf15:/usr/local/tomcat# cp -a webapps.dist/* webapps/</span><br><span class="line">root@efa6bf9baf15:/usr/local/tomcat# exit</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">访问当前宿主机IP:49154</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">官方镜像默认是无法打开此页面</span></span><br></pre></td></tr></table></figure>

<p><img src="https://images.weserv.nl/?url=https://img2020.cnblogs.com/blog/2242444/202112/2242444-20211218065838524-2076511357.png"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[root@node1 ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND             CREATED         STATUS         PORTS                                         NAMES</span><br><span class="line">efa6bf9baf15   24        &quot;catalina.sh run&quot;   4 minutes ago   Up 4 minutes   0.0.0.0:49154-&gt;8080/tcp, :::49154-&gt;8080/tcp   hungry_zhukovsky</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">								 作者				描述			  容器<span class="built_in">id</span>  镜像:tag[版本]</span></span><br><span class="line">[root@node1 ~]# docker commit -a xiaowangc -m &quot;Modify home page&quot; efa tomcat01:1.0</span><br><span class="line">sha256:fb71bc6566f66ab89c1b2c7b17358ade7a44f17c89f5c8193fa054b5d771f658</span><br><span class="line">[root@node1 ~]# docker images</span><br><span class="line">REPOSITORY      TAG       IMAGE ID       CREATED         SIZE</span><br><span class="line">tomcat01        1.0       fb71bc6566f6   3 seconds ago   684MB		# 打包可以查看镜像</span><br><span class="line">tomcat          latest    24207ccc9cce   3 days ago      680MB</span><br><span class="line">centos          latest    5d0da3dc9764   2 months ago    231MB</span><br><span class="line">elasticsearch   latest    5acf0e8da90b   3 years ago     486MB</span><br><span class="line">[root@node1 ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND             CREATED         STATUS         PORTS                                         NAMES</span><br><span class="line">efa6bf9baf15   24        &quot;catalina.sh run&quot;   9 minutes ago   Up 9 minutes   0.0.0.0:49154-&gt;8080/tcp, :::49154-&gt;8080/tcp   hungry_zhukovsky</span><br><span class="line">[root@node1 ~]# docker stop efa		# 停止之前的容器</span><br><span class="line">efa</span><br><span class="line">[root@node1 ~]# docker run -d -P fb71		# 通过我们打包后的镜像创建容器</span><br><span class="line">a1b1c2987c3fee9546335a0070a31c3f5d903c3e17f04f34452aca775e7e1b10</span><br><span class="line">[root@node1 ~]# docker ps			</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND             CREATED         STATUS         PORTS                                         NAMES</span><br><span class="line">a1b1c2987c3f   fb71      &quot;catalina.sh run&quot;   2 seconds ago   Up 2 seconds   0.0.0.0:49155-&gt;8080/tcp, :::49155-&gt;8080/tcp   compassionate_fermat</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">直接访问 宿主机IP:49155</span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">官方的tomcat镜像不做修改，无法访问这个主页，现在我们通过修改后的容器打包成镜像，再创建就可以直接访问</span></span><br></pre></td></tr></table></figure>

<p><img src="https://images.weserv.nl/?url=https://img2020.cnblogs.com/blog/2242444/202112/2242444-20211218065903247-64115338.png"></p>
<h1 id="容器卷-容器数据持久化"><a href="#容器卷-容器数据持久化" class="headerlink" title="容器卷(容器数据持久化)"></a>容器卷(容器数据持久化)</h1><blockquote>
<p>数据可以存储在容器中，但是一旦将容器进行删除就等同删库跑路了qwq。</p>
</blockquote>
<h6 id="Docker对于宿主机来说，只是一个运行在Linux上的应用程序，因此它的的数据存储还是会依赖宿主机，实现数据持久化的两种方式："><a href="#Docker对于宿主机来说，只是一个运行在Linux上的应用程序，因此它的的数据存储还是会依赖宿主机，实现数据持久化的两种方式：" class="headerlink" title="Docker对于宿主机来说，只是一个运行在Linux上的应用程序，因此它的的数据存储还是会依赖宿主机，实现数据持久化的两种方式："></a>Docker对于宿主机来说，只是一个运行在Linux上的应用程序，因此它的的数据存储还是会依赖宿主机，实现数据持久化的两种方式：</h6><ul>
<li><strong>Bind Mount</strong></li>
</ul>
<h6 id="Bind-Mount数据持久化的方式，如果挂载本地的一个目录，则对应容器的目录下的内容会被本地的数据覆盖。使用Bind-Mount还需要指定本地的某个目录挂载到容器的某个目录。"><a href="#Bind-Mount数据持久化的方式，如果挂载本地的一个目录，则对应容器的目录下的内容会被本地的数据覆盖。使用Bind-Mount还需要指定本地的某个目录挂载到容器的某个目录。" class="headerlink" title="Bind Mount数据持久化的方式，如果挂载本地的一个目录，则对应容器的目录下的内容会被本地的数据覆盖。使用Bind Mount还需要指定本地的某个目录挂载到容器的某个目录。"></a>Bind Mount数据持久化的方式，如果挂载本地的一个目录，则对应容器的目录下的内容会被本地的数据覆盖。使用Bind Mount还需要指定本地的某个目录挂载到容器的某个目录。</h6><ul>
<li><strong>Docker Manager Volume</strong></li>
</ul>
<h6 id="Docker-Manager-Volume相比Bind-Mount，挂载目录到容器中数据不会被覆盖，同时也不需要管理员指定从宿主机挂载到容器中的某个目录，只需要指定对容器的某个目录进行挂载，而挂载到宿主机的某个目录是由Docker来进行统一管理。"><a href="#Docker-Manager-Volume相比Bind-Mount，挂载目录到容器中数据不会被覆盖，同时也不需要管理员指定从宿主机挂载到容器中的某个目录，只需要指定对容器的某个目录进行挂载，而挂载到宿主机的某个目录是由Docker来进行统一管理。" class="headerlink" title="Docker Manager Volume相比Bind Mount，挂载目录到容器中数据不会被覆盖，同时也不需要管理员指定从宿主机挂载到容器中的某个目录，只需要指定对容器的某个目录进行挂载，而挂载到宿主机的某个目录是由Docker来进行统一管理。"></a>Docker Manager Volume相比Bind Mount，挂载目录到容器中数据不会被覆盖，同时也不需要管理员指定从宿主机挂载到容器中的某个目录，只需要指定对容器的某个目录进行挂载，而挂载到宿主机的某个目录是由Docker来进行统一管理。</h6><h6 id="任一一种方式的持久化都不会在容器被删除后导致数据丢失"><a href="#任一一种方式的持久化都不会在容器被删除后导致数据丢失" class="headerlink" title="任一一种方式的持久化都不会在容器被删除后导致数据丢失"></a>任一一种方式的持久化都不会在容器被删除后导致数据丢失</h6><p><img src="https://images.weserv.nl/?url=https://img2020.cnblogs.com/blog/2242444/202112/2242444-20211218065958095-151971623.png"></p>
<h2 id="Bind-Mount"><a href="#Bind-Mount" class="headerlink" title="Bind Mount"></a>Bind Mount</h2><p>Bind Mount挂载卷有两种方式：</p>
<ul>
<li><p>-v [主机路径:]容器路径 [:可选参数]</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# ls /root/		# 查看主机root下并没有docker-volume目录</span><br><span class="line">anaconda-ks.cfg  Documents  initial-setup-ks.cfg  Pictures  quick_start.sh  Videos</span><br><span class="line">Desktop          Downloads  Music                 Public    Templates       xiaowangc</span><br><span class="line">[root@node1 ~]# docker run --help | grep volume</span><br><span class="line">  -v, --volume list                    Bind mount a volume	# 使用方式  -v 宿主机路径:容器路径</span><br><span class="line">      --volume-driver string           Optional volume driver for the container</span><br><span class="line">      --volumes-from list              Mount volumes from the specified container(s)</span><br><span class="line">[root@node1 ~]# docker run -it -v /root/docker-volume:/root/docker centos /bin/bash		# 启动容器并进行绑定</span><br><span class="line">[root@e8136a876260 /]# ls</span><br><span class="line">bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var</span><br><span class="line">[root@e8136a876260 /]# touch /root/docker/abc		# 在对于的挂载位置创建一个文件</span><br><span class="line">[root@e8136a876260 /]# exit							# 退出</span><br><span class="line">exit</span><br><span class="line">[root@node1 ~]# ls /root/docker-volume/		# 查看本机对于的目录位置，可以看到我们之前在容器中创建的abc文件</span><br><span class="line">abc</span><br><span class="line">[root@node1 ~]# docker ps -a		# 查看更改创建的容器id</span><br><span class="line">CONTAINER ID   IMAGE           COMMAND                  CREATED         STATUS                       PORTS     NAMES</span><br><span class="line">e8136a876260   centos          &quot;/bin/bash&quot;              3 minutes ago   Exited (0) 3 minutes ago               distracted_bose</span><br><span class="line">a1b1c2987c3f   fb71            &quot;catalina.sh run&quot;        3 hours ago     Exited (143) 5 minutes ago             compassionate_fermat</span><br><span class="line">efa6bf9baf15   24              &quot;catalina.sh run&quot;        3 hours ago     Exited (143) 3 hours ago               hungry_zhukovsky</span><br><span class="line">a1099bfaa7ff   tomcat          &quot;catalina.sh run&quot;        13 hours ago    Exited (143) 11 hours ago              clever_carson</span><br><span class="line">ca73206e78db   tomcat          &quot;catalina.sh run&quot;        13 hours ago    Exited (130) 13 hours ago              keen_mclean</span><br><span class="line">62d75c8f96c8   tomcat          &quot;/bin/bash&quot;              13 hours ago    Exited (0) 13 hours ago                strange_rhodes</span><br><span class="line">afecd5719875   elasticsearch   &quot;/docker-entrypoint.…&quot;   22 hours ago    Exited (130) 22 hours ago              modest_hawking</span><br><span class="line">[root@node1 ~]# docker inspect e8		# 获取容器元数据</span><br><span class="line">...</span><br><span class="line"> &quot;Binds&quot;: [</span><br><span class="line">                &quot;/root/docker-volume:/root/docker&quot;</span><br><span class="line">            ],</span><br><span class="line">...</span><br><span class="line">&quot;Mounts&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;Type&quot;: &quot;bind&quot;,		# 类型</span><br><span class="line">                &quot;Source&quot;: &quot;/root/docker-volume&quot;,	# 源目录(宿主机路径)</span><br><span class="line">                &quot;Destination&quot;: &quot;/root/docker&quot;,		# 目的目录(Docker容器中路径)</span><br><span class="line">                &quot;Mode&quot;: &quot;&quot;,</span><br><span class="line">                &quot;RW&quot;: true,							</span><br><span class="line">                &quot;Propagation&quot;: &quot;rprivate&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">...</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">我们试着将容器进行删除</span></span><br><span class="line">[root@node1 ~]# docker ps -a		# 找到更改创建的容器id</span><br><span class="line">CONTAINER ID   IMAGE           COMMAND                  CREATED          STATUS                        PORTS     NAMES</span><br><span class="line">e8136a876260   centos          &quot;/bin/bash&quot;              10 minutes ago   Exited (0) 10 minutes ago               distracted_bose</span><br><span class="line">a1b1c2987c3f   fb71            &quot;catalina.sh run&quot;        3 hours ago      Exited (143) 12 minutes ago             compassionate_fermat</span><br><span class="line">efa6bf9baf15   24              &quot;catalina.sh run&quot;        3 hours ago      Exited (143) 3 hours ago                hungry_zhukovsky</span><br><span class="line">a1099bfaa7ff   tomcat          &quot;catalina.sh run&quot;        13 hours ago     Exited (143) 11 hours ago               clever_carson</span><br><span class="line">ca73206e78db   tomcat          &quot;catalina.sh run&quot;        13 hours ago     Exited (130) 13 hours ago               keen_mclean</span><br><span class="line">62d75c8f96c8   tomcat          &quot;/bin/bash&quot;              13 hours ago     Exited (0) 13 hours ago                 strange_rhodes</span><br><span class="line">afecd5719875   elasticsearch   &quot;/docker-entrypoint.…&quot;   22 hours ago     Exited (130) 22 hours ago               modest_hawking</span><br><span class="line">[root@node1 ~]# docker rm e81		# 删除容器</span><br><span class="line">e81</span><br><span class="line">[root@node1 ~]# ls /root/docker-volume/		# 再次查看发现数据还存在</span><br><span class="line">abc</span><br><span class="line">[root@node1 ~]#</span><br></pre></td></tr></table></figure>

<p>下面我们再深入了解一下-v</p>
</li>
</ul>
<p><img src="https://images.weserv.nl/?url=https://img2020.cnblogs.com/blog/2242444/202112/2242444-20211218070017530-1564959356.png"></p>
  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# man docker run		# 有兴趣的可以自己阅读翻译</span><br><span class="line"></span><br><span class="line">       -v|--volume[=[[HOST-DIR:]CONTAINER-DIR[:OPTIONS]]]</span><br><span class="line">          Create a bind mount. If you specify, -v /HOST-DIR:/CONTAINER-DIR, Docker</span><br><span class="line">          bind mounts /HOST-DIR in the host to /CONTAINER-DIR in the Docker</span><br><span class="line">          container. If &#x27;HOST-DIR&#x27; is omitted,  Docker automatically creates the new</span><br><span class="line">          volume on the host.  The OPTIONS are a comma delimited list and can be:</span><br><span class="line">          #创建绑定挂载。如果指定-v/HOST-DIR:/CONTAINER-DIR，则为Docker将主机中的mounts/HOST-DIR绑定到Docker中的/CONTAINER-DIR容器如果省略“HOST-DIR”，Docker会自动创建新的主机上的卷。选项是逗号分隔的列表，可以是：</span><br><span class="line"></span><br><span class="line">              · [rw|ro]	# 设置卷是否可读写，在上面的实例中我们看到一行 &quot;RW&quot;: true,表示可读写，当然我们也可以在挂载之前设置为ro(只读)</span><br><span class="line"></span><br><span class="line">              · [z|Z]</span><br><span class="line"></span><br><span class="line">              · [[r]shared|[r]slave|[r]private]</span><br><span class="line"></span><br><span class="line">              · [delegated|cached|consistent]</span><br><span class="line"></span><br><span class="line">              · [nocopy]</span><br><span class="line">              </span><br><span class="line">	   # 这里告诉我们CONTAINER-DIR(容器目录)必须使用绝对路径，而HOST-DIR可以使用相对/绝对路径</span><br><span class="line">       The  CONTAINER-DIR must be an absolute path such as /src/docs. The HOST-DIR can be an absolute path or a name value. A name value must start with an alphanumeric character, followed by a-z0-9, _ (underscore), . (period) or -</span><br><span class="line">       (hyphen). An absolute path starts with a / (forward slash).</span><br><span class="line"></span><br><span class="line">	   # 如果HOST-DIR是绝对路径，Docker Bind会装载到指定路径。如果是名称docker会使用该名称创建一个以改名称命名的卷</span><br><span class="line">       If you supply a HOST-DIR that is an absolute path,  Docker bind-mounts to the path you specify. If you supply a name, Docker creates a named volume by that name. For example, you can specify either /foo or foo for a HOST-DIR value. If you supply the /foo value, Docker creates a bind mount. If you supply the foo specification, Docker creates a named volume.</span><br><span class="line"></span><br><span class="line">	   # 可以使用-v绑定一个或多个，如果其他容器也要使用请用--volumes-from选项</span><br><span class="line">       You can specify multiple  -v options to mount one or more mounts to a container. To use these same mounts in other containers, specify the --volumes-from option also.</span><br><span class="line"></span><br><span class="line">	   #你还可以在：后面使用多个参数，设置读写权限rw、ro 例如： -v 主机路径:容器路径：ro...;还能使用Z/z设置Docker重新标记共享卷上的文件对象，Z选项告诉Docker使用私有非共享标签。只有当前容器才能使用专用卷。z表示共享卷内容</span><br><span class="line">       You  can  supply  additional  options for each bind mount following an additional colon.  A :ro or :rw suffix mounts a volume in read-only or read-write mode, respectively. By default, volumes are mounted in read-write mode.</span><br><span class="line">       You can also specify the consistency requirement for the mount, either :consistent (the default), :cached, or :delegated.  Multiple options are separated by commas, e.g. :ro,cached.</span><br><span class="line"></span><br><span class="line">       Labeling systems like SELinux require that proper labels are placed on volume content mounted into a container. Without a label, the security system might prevent the processes running inside the  container  from  using  the</span><br><span class="line">       content. By default, Docker does not change the labels set by the OS.</span><br><span class="line"></span><br><span class="line">       To  change  a label in the container context, you can add either of two suffixes :z or :Z to the volume mount. These suffixes tell Docker to relabel file objects on the shared volumes. The z option tells Docker that two con‐</span><br><span class="line">       tainers share the volume content. As a result, Docker labels the content with a shared content label. Shared volume labels allow all containers to read/write content.  The Z option tells Docker to label the  content  with  a</span><br><span class="line">       private unshared label.  Only the current container can use a private volume.</span><br><span class="line"></span><br><span class="line">       By  default bind mounted volumes are private. That means any mounts done inside container will not be visible on host and vice-a-versa. One can change this behavior by specifying a volume mount propagation property. Making a</span><br><span class="line">       volume shared mounts done under that volume inside container will be visible on host and vice-a-versa. Making a volume slave enables only one way mount propagation and that is mounts done on host under that  volume  will  be</span><br><span class="line">       visible inside container but not the other way around.</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">要控制卷的装载传播属性，可以使用：[r]共享、：[r]从属或：[r]专用传播标志。只能为绑定装入的卷指定传播属性，而不能为内部卷或命名卷指定传播属性卷。要使装载传播工作，源装载点（装载源目录的装载点）必须具有正确的传播属性。对于共享卷，必须共享源装载点。对于从卷，源装载必须是共享的或从的。</span></span><br><span class="line">       To  control  mount  propagation  property of volume one can use :[r]shared, :[r]slave or :[r]private propagation flag. Propagation property can be specified only for bind mounted volumes and not for internal volumes or named</span><br><span class="line">       volumes. For mount propagation to work source mount point (mount point where source dir is mounted on) has to have right propagation properties. For shared volumes, source mount point has to be shared. And for slave volumes,</span><br><span class="line">       source mount has to be either shared or slave.</span><br><span class="line">   </span><br><span class="line">       ...</span><br><span class="line">       </span><br><span class="line">       To disable automatic copying of data from the container path to the volume, use the nocopy flag. The nocopy flag can be set on bind mounts and named volumes.</span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">另请参见--mount，它是--tmpfs和--volume的继承者。即使没有计划弃用--volume，也建议使用--mount。</span></span><br><span class="line">       See also --mount, which is the successor of --tmpfs and --volume.  Even though there is no plan to deprecate --volume, usage of --mount is recommended.</span><br></pre></td></tr></table></figure>

<ul>
<li><p>–mount</p>
<p>第二种通过–mount也是官方建议使用的方法，它相比-v跟灵活、可读性高。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# man docker run		# 有兴趣的可以自己阅读翻译 </span><br><span class="line"></span><br><span class="line">      --mount type=TYPE,TYPE-SPECIFIC-OPTION[,...]</span><br><span class="line">          Attach a filesystem mount to the container</span><br><span class="line"></span><br><span class="line">	   # 当前支持的装载类型有bind、volume和tmpfs。</span><br><span class="line">       Current supported mount TYPES are bind, volume, and tmpfs.</span><br><span class="line"></span><br><span class="line">       e.g.	# 例如</span><br><span class="line">	   # bind类型(Bind Mount)，源地址，目录地址</span><br><span class="line">       type=bind,source=/path/on/host,destination=/path/in/container</span><br><span class="line"></span><br><span class="line">	   # volume类型(Docker Manager Volume)，源地址，目的地址，卷标，卷标</span><br><span class="line">       type=volume,source=my-volume,destination=/path/in/container,volume-label=&quot;color=red&quot;,volume-label=&quot;shape=round&quot;</span><br><span class="line"></span><br><span class="line">	   # 前面图上的tmpfs</span><br><span class="line">       type=tmpfs,tmpfs-size=512M,destination=/path/in/container</span><br><span class="line"></span><br><span class="line">	   # 常用选项</span><br><span class="line">       Common Options:</span><br><span class="line">			  # 设置源地址</span><br><span class="line">              · src, source: mount source spec for bind and volume. Mandatory for bind.</span><br><span class="line">			  # 设置目的地址</span><br><span class="line">              · dst, destination, target: mount destination spec.</span><br><span class="line">			  # 设置权限</span><br><span class="line">              · ro, readonly: true or false (default).</span><br><span class="line"></span><br><span class="line">		...</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="Docker-Manager-Volume"><a href="#Docker-Manager-Volume" class="headerlink" title="Docker  Manager Volume"></a>Docker  Manager Volume</h2><p>通过上面对–mount参数的了解，我想对使用Docker Manager Volume方法挂载或绑定应该知道改怎么操作了~</p>
<p>下面来实践一下</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker run -it --mount src=docker_home,dst=/home centos /bin/bash</span><br><span class="line">[root@69a38a458cb7 /]#   #ctrl + q + p 不停止退出容器</span><br><span class="line">[root@node1 ~]# docker ps</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS          PORTS     NAMES</span><br><span class="line">69a38a458cb7   centos    &quot;/bin/bash&quot;   41 seconds ago   Up 41 seconds             mystifying_satoshi</span><br><span class="line">[root@node1 ~]# docker inspect 69</span><br><span class="line">        &quot;Mounts&quot;: [</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;Type&quot;: &quot;volume&quot;,		# 挂载类型 volume</span><br><span class="line">                &quot;Name&quot;: &quot;docker_home&quot;,	# 前面有提到过，如果设置名称那么将以名称来创建对于卷</span><br><span class="line">                &quot;Source&quot;: &quot;/var/lib/docker/volumes/docker_home/_data&quot;,		# 主机上目录地址(Docker自行创建)</span><br><span class="line">                &quot;Destination&quot;: &quot;/home&quot;,										# 目录地址</span><br><span class="line">                &quot;Driver&quot;: &quot;local&quot;,											# 设备为本地</span><br><span class="line">                &quot;Mode&quot;: &quot;z&quot;,												# z表示共享卷内容</span><br><span class="line">                &quot;RW&quot;: true,													# 表示可读写</span><br><span class="line">                &quot;Propagation&quot;: &quot;&quot;</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>



<h2 id="聚名和匿名挂载"><a href="#聚名和匿名挂载" class="headerlink" title="聚名和匿名挂载"></a>聚名和匿名挂载</h2><blockquote>
<p>在通过docker volume ls 查看卷的时候会发现有卷名为哈希值命名的是因为在挂载的时候并未指定卷名，bind不能通过–mount设置卷名，但可以直接使用-v 进行设置例: -v 卷名:容器路径 ，volume方式可以通过–mount 卷名:容器路径进行设置卷名，如果未设置将以哈希值进行命名</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker volume ls	# 查看卷</span><br><span class="line">DRIVER    VOLUME NAME</span><br><span class="line">local     15d9a94c6a8cdbffa66b3d9c76d476243c312f70f7e54d46549d137193036479	# 匿名挂载，这是因为在挂载的时候并未指定源路径的名称</span><br><span class="line">local     docker_home	# 聚名挂载，如果指定了名称那么将会以名称创建对于的卷</span><br><span class="line">[root@node1 ~]# docker volume inspect 15d9a94c6a8cdbffa66b3d9c76d476243c312f70f7e54d46549d137193036479</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;CreatedAt&quot;: &quot;2021-12-12T04:57:10+08:00&quot;,</span><br><span class="line">        &quot;Driver&quot;: &quot;local&quot;,</span><br><span class="line">        &quot;Labels&quot;: null,</span><br><span class="line">        &quot;Mountpoint&quot;: &quot;/var/lib/docker/volumes/15d9a94c6a8cdbffa66b3d9c76d476243c312f70f7e54d46549d137193036479/_data&quot;,</span><br><span class="line">        &quot;Name&quot;: &quot;15d9a94c6a8cdbffa66b3d9c76d476243c312f70f7e54d46549d137193036479&quot;,</span><br><span class="line">        &quot;Options&quot;: null,</span><br><span class="line">        &quot;Scope&quot;: &quot;local&quot;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line">[root@node1 ~]# docker volume inspect docker_home</span><br><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;CreatedAt&quot;: &quot;2021-12-13T04:19:01+08:00&quot;,</span><br><span class="line">        &quot;Driver&quot;: &quot;local&quot;,</span><br><span class="line">        &quot;Labels&quot;: null,</span><br><span class="line">        &quot;Mountpoint&quot;: &quot;/var/lib/docker/volumes/docker_home/_data&quot;,</span><br><span class="line">        &quot;Name&quot;: &quot;docker_home&quot;,</span><br><span class="line">        &quot;Options&quot;: null,</span><br><span class="line">        &quot;Scope&quot;: &quot;local&quot;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line">[root@node1 ~]#  </span><br></pre></td></tr></table></figure>



<h1 id="Docker-File"><a href="#Docker-File" class="headerlink" title="Docker File"></a>Docker File</h1><blockquote>
<p>此镜像在构建基本镜像（例如<a target="_blank" rel="noopener" href="https://registry.hub.docker.com/_/debian/"><code>debian</code></a>和<a target="_blank" rel="noopener" href="https://registry.hub.docker.com/_/busybox/"><code>busybox</code></a>）或超级小镜像（仅包含单个二进制文件和它需要的任何内容，例如<a target="_blank" rel="noopener" href="https://registry.hub.docker.com/_/hello-world/"><code>hello-world</code></a>）的上下文中最有用。</p>
</blockquote>
<p>CentOS的官方Dockerfile</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">FROM scratch												# 最基础的镜像</span><br><span class="line">ADD centos-8-x86_64.tar.xz /								# 添加centos-8-x86_64软件包</span><br><span class="line">LABEL org.label-schema.schema-version=&quot;1.0&quot;/				# 添加元数据到镜像</span><br><span class="line">	  org.label-schema.name=&quot;CentOS Base Image&quot;/</span><br><span class="line">	  org.label-schema.vendor=&quot;CentOS&quot;/</span><br><span class="line">	  org.label-schema.license=&quot;GPLv2&quot;/</span><br><span class="line">	  org.label-schema.build-date=&quot;20210915&quot;</span><br><span class="line">CMD [&quot;/bin/bash&quot;]</span><br></pre></td></tr></table></figure>

<p>DockerFile常用命令：</p>
<p><img src="https://images.weserv.nl/?url=https://img2020.cnblogs.com/blog/2242444/202112/2242444-20211218070042966-277361809.png"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker build --help</span><br><span class="line"></span><br><span class="line">Usage:  docker build [OPTIONS] PATH | URL | -</span><br><span class="line"></span><br><span class="line">Build an image from a Dockerfile		# 从Dockerfile生成镜像</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">								# 添加自定义主机到IP映射（主机：IP）</span><br><span class="line">      --add-host list           Add a custom host-to-IP mapping (host:ip)</span><br><span class="line">      --build-arg list          Set build-time variables		# 设置构建时变量</span><br><span class="line">      --cache-from strings      Images to consider as cache sources		# 视为高速缓存源的镜像</span><br><span class="line">      --cgroup-parent string    Optional parent cgroup for the container	# 容器的可选父cgroup</span><br><span class="line">      --compress                Compress the build context using gzip		# 使用gzip压缩构建上下文</span><br><span class="line">      							# 限制CPU CFS（完全公平调度程序）周期</span><br><span class="line">      --cpu-period int          Limit the CPU CFS (Completely Fair Scheduler) period</span><br><span class="line">      							# 限制CPU CFS（完全公平调度程序）配额</span><br><span class="line">      --cpu-quota int           Limit the CPU CFS (Completely Fair Scheduler) quota</span><br><span class="line">  -c, --cpu-shares int          CPU shares (relative weight)	# CPU份额（相对权重）</span><br><span class="line">      --cpuset-cpus string      CPUs in which to allow execution (0-3, 0,1)		# 允许执行的CPU（0-3,0,1）</span><br><span class="line">      --cpuset-mems string      MEMs in which to allow execution (0-3, 0,1)		# 允许执行的MEMs（0-3,0,1）</span><br><span class="line">      --disable-content-trust   Skip image verification (default true)			# 跳过镜像验证（默认为真）</span><br><span class="line">      							# Dockerfile的名称（默认值为“路径/Dockerfile”）</span><br><span class="line">  -f, --file string             Name of the Dockerfile (Default is &#x27;PATH/Dockerfile&#x27;)</span><br><span class="line">      --force-rm                Always remove intermediate containers			# 务必拆下中间容器</span><br><span class="line">      --iidfile string          Write the image ID to the file					# 将镜像ID写入文件</span><br><span class="line">      --isolation string        Container isolation technology					# 容器隔离技术</span><br><span class="line">      --label list              Set metadata for an image						# 设置镜像的元数据</span><br><span class="line">  -m, --memory bytes            Memory limit									# 内存限制</span><br><span class="line">  								# 交换限制等于内存加交换：&#x27;-1&#x27;以启用无限制交换</span><br><span class="line">      --memory-swap bytes       Swap limit equal to memory plus swap: &#x27;-1&#x27; to enable unlimited swap</span><br><span class="line">      							# 在构建期间为运行指令设置网络模式（默认值为“默认值”）</span><br><span class="line">      --network string          Set the networking mode for the RUN instructions during build (default &quot;default&quot;)</span><br><span class="line">      --no-cache                Do not use cache when building the image	# 生成镜像时不要使用缓存</span><br><span class="line">      --pull                    Always attempt to pull a newer version of the image # 始终尝试提取镜像的更新版本</span><br><span class="line">      							# 成功时抑制生成输出并打印镜像ID</span><br><span class="line">  -q, --quiet                   Suppress the build output and print image ID on success</span><br><span class="line">  								# 成功生成后删除中间容器（默认为true）</span><br><span class="line">      --rm                      Remove intermediate containers after a successful build (default true)</span><br><span class="line">      --security-opt strings    Security options								# 安全选项</span><br><span class="line">      --shm-size bytes          Size of /dev/shm								# /dev/shm的大小</span><br><span class="line">      							# 名称和可选的“名称：标记”格式的标记</span><br><span class="line">  -t, --tag list                Name and optionally a tag in the &#x27;name:tag&#x27; format</span><br><span class="line">      --target string           Set the target build stage to build.			# 将目标构建阶段设置为build。</span><br><span class="line">      --ulimit ulimit           Ulimit options (default [])						# Ulimit选项（默认值[]）</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 docker]# vim Dockerfile</span><br><span class="line">FROM centos</span><br><span class="line">MAINTAINER xiaowangc&lt;780312916@qq.com&gt;</span><br><span class="line">ADD jdk-8u202-linux-x64.tar.gz /usr/local</span><br><span class="line">ADD apache-tomcat-10.0.14.tar.gz /usr/local</span><br><span class="line">ENV MYPATH /usr/local</span><br><span class="line">WORKDIR $MYPATH</span><br><span class="line">ENV JAVA_HOME /usr/local/jdk1.8.0_202</span><br><span class="line">ENV CLASSPATH $JAVA_HOME/lib/dt.jar;$JAVA_HOME/lib/tools.jar</span><br><span class="line">ENV CATALINA_HOME /usr/local/apache-tomcat-10.0.14</span><br><span class="line">ENV CATALINA_BASH /usr/local/apache-tomcat-10.0.14</span><br><span class="line">ENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/lib:$CATALINA_HOME/bin</span><br><span class="line">EXPOSE 8080</span><br><span class="line">CMD /usr/local/apache-tomcat-10.0.14/bin/startup.sh &amp;&amp; tail -F /usr/local/apache-tomcat-10.0.14/bin/logs/catalina.out</span><br><span class="line">[root@node1 docker]# docker build -t tomcat:1.0 .</span><br><span class="line">Sending build context to Docker daemon  626.3MB</span><br><span class="line">Step 1/13 : FROM centos</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">5d0da3dc9764</span></span><br><span class="line">Step 2/13 : MAINTAINER xiaowangc&lt;780312916@qq.com&gt;</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">Running <span class="keyword">in</span> c4eb917f2af7</span></span><br><span class="line">Removing intermediate container c4eb917f2af7</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">ce301fca9581</span></span><br><span class="line">Step 3/13 : ADD jdk-8u202-linux-x64.tar.gz /usr/local</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">80553040d2a3</span></span><br><span class="line">Step 4/13 : ADD apache-tomcat-10.0.14.tar.gz /usr/local</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">e817c2abc0ea</span></span><br><span class="line">Step 5/13 : ENV MYPATH /usr/local</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">Running <span class="keyword">in</span> dc72d266f4eb</span></span><br><span class="line">Removing intermediate container dc72d266f4eb</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">9a11104f7a13</span></span><br><span class="line">Step 6/13 : WORKDIR $MYPATH</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">Running <span class="keyword">in</span> cdf0377b61ad</span></span><br><span class="line">Removing intermediate container cdf0377b61ad</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">e94e866312c7</span></span><br><span class="line">Step 7/13 : ENV JAVA_HOME /usr/local/jdk1.8.0_202</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">Running <span class="keyword">in</span> 460df16b993a</span></span><br><span class="line">Removing intermediate container 460df16b993a</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">6523add551dc</span></span><br><span class="line">Step 8/13 : ENV CLASSPATH $JAVA_HOME/lib/dt.jar;$JAVA_HOME/lib/tools.jar</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">Running <span class="keyword">in</span> c3243bb658ab</span></span><br><span class="line">Removing intermediate container c3243bb658ab</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">d27761de5003</span></span><br><span class="line">Step 9/13 : ENV CATALINA_HOME /usr/local/apache-tomcat-10.0.14</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">Running <span class="keyword">in</span> a202f40d116f</span></span><br><span class="line">Removing intermediate container a202f40d116f</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">3e2b79eac04f</span></span><br><span class="line">Step 10/13 : ENV CATALINA_BASH /usr/local/apache-tomcat-10.0.14</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">Running <span class="keyword">in</span> 75aa2512492c</span></span><br><span class="line">Removing intermediate container 75aa2512492c</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">69f0cf1dfa7c</span></span><br><span class="line">Step 11/13 : ENV PATH $PATH:$JAVA_HOME/bin:$CATALINA_HOME/lib:$CATALINA_HOME/bin</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">Running <span class="keyword">in</span> 61d1715c1996</span></span><br><span class="line">Removing intermediate container 61d1715c1996</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">9c10da8b965f</span></span><br><span class="line">Step 12/13 : EXPOSE 8080</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">Running <span class="keyword">in</span> 27eb03392b67</span></span><br><span class="line">Removing intermediate container 27eb03392b67</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">29061051cbe8</span></span><br><span class="line">Step 13/13 : CMD /usr/local/apache-tomcat-10.0.14/bin/startup.sh &amp;&amp; tail -F /usr/local/apache-tomcat-10.0.14/bin/logs/catalina.out</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">Running <span class="keyword">in</span> 96463dc0a1e7</span></span><br><span class="line">Removing intermediate container 96463dc0a1e7</span><br><span class="line"><span class="meta prompt_"> ---&gt; </span><span class="language-bash">c6bbae39158e</span></span><br><span class="line">Successfully built c6bbae39158e</span><br><span class="line">Successfully tagged tomcat:1.0</span><br><span class="line">[root@node1 docker]# docker run -itdp 80:8080 c6	# 将容器8080映射到主机80</span><br><span class="line">212d00ffa33649ac8f4370feab11a36552d2ae40719d398718c29c233e3c09ed</span><br><span class="line">[root@node1 docker]# docker ps						# 查看容器是否正在运行</span><br><span class="line">CONTAINER ID   IMAGE     COMMAND                  CREATED         STATUS         PORTS                                   NAMES</span><br><span class="line">212d00ffa336   c6        &quot;/bin/sh -c &#x27;/usr/lo…&quot;   3 seconds ago   Up 3 seconds   0.0.0.0:80-&gt;8080/tcp, :::80-&gt;8080/tcp   confident_archimedes</span><br><span class="line">[root@node1 docker]#</span><br></pre></td></tr></table></figure>

<p><strong>访问宿主机IP</strong></p>
<p><img src="https://images.weserv.nl/?url=https://img2020.cnblogs.com/blog/2242444/202112/2242444-20211218070057949-125116092.png"></p>
<h1 id="Docker-Network"><a href="#Docker-Network" class="headerlink" title="Docker Network"></a>Docker Network</h1><blockquote>
<p>Docker网络模式</p>
</blockquote>
<table>
<thead>
<tr>
<th align="center">Docker网络</th>
<th align="center">说明</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Host</td>
<td align="center">容器和宿主机共用Network&#x2F;Port</td>
</tr>
<tr>
<td align="center">Container</td>
<td align="center">容器和另外的容器共用Network&#x2F;Port</td>
</tr>
<tr>
<td align="center">None</td>
<td align="center">关闭该容器的网络</td>
</tr>
<tr>
<td align="center">Bridge</td>
<td align="center">容器会分配到属于各自的IP，并连接到Docker0的虚拟网桥，通过Docker0与宿主机通信(默认模式)</td>
</tr>
</tbody></table>
<h2 id="Bridge"><a href="#Bridge" class="headerlink" title="Bridge"></a>Bridge</h2><p><img src="https://images.weserv.nl/?url=https://img2020.cnblogs.com/blog/2242444/202112/2242444-20211218070111722-358208503.png"></p>
<h6 id="桥接-Bridge-网络从上图就可以看出来，我们创建的两台容器是不能直接进行通信而是经过Docker0进行桥接实现的-二层交换-。在创建容器时，如果没有更改容器网络那么容器默认将加入到Docker0中。"><a href="#桥接-Bridge-网络从上图就可以看出来，我们创建的两台容器是不能直接进行通信而是经过Docker0进行桥接实现的-二层交换-。在创建容器时，如果没有更改容器网络那么容器默认将加入到Docker0中。" class="headerlink" title="桥接(Bridge)网络从上图就可以看出来，我们创建的两台容器是不能直接进行通信而是经过Docker0进行桥接实现的(二层交换)。在创建容器时，如果没有更改容器网络那么容器默认将加入到Docker0中。"></a>桥接(Bridge)网络从上图就可以看出来，我们创建的两台容器是不能直接进行通信而是经过Docker0进行桥接实现的(二层交换)。在创建容器时，如果没有更改容器网络那么容器默认将加入到Docker0中。</h6><p><img src="https://images.weserv.nl/?url=https://img2020.cnblogs.com/blog/2242444/202112/2242444-20211218070123087-2044118293.png"></p>
<p>通过在宿主机和容器通过命令对网络进行查看，我们还会会看到宿主机和容器的网卡的名称有着微妙的联系，if7-if8、if9-if10…</p>
<p>这里是因为容器使用了veth-pair,veth设备的特点(在Bridge的第一张图就能看出)：</p>
<ul>
<li>veth设备是成对出现的，另一端两个设备彼此相连</li>
<li>一个设备收到协议栈的数据发送请求后，会将数据发送到另一个设备上去</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建一个新桥并加入容器</span></span><br><span class="line">[root@node1 ~]# docker network</span><br><span class="line"></span><br><span class="line">Usage:  docker network COMMAND</span><br><span class="line"></span><br><span class="line">Manage networks</span><br><span class="line"></span><br><span class="line">Commands:</span><br><span class="line">  connect     Connect a container to a network		# 将容器连接到网络</span><br><span class="line">  create      Create a network						# 创建一个新网络</span><br><span class="line">  disconnect  Disconnect a container from a network		# 断开容器与网络的连接</span><br><span class="line">  inspect     Display detailed information on one or more networks		# 显示一个或多个网络上的详细信息</span><br><span class="line">  ls          List networks		# 列出所有网络</span><br><span class="line">  prune       Remove all unused networks	# 删除所有未使用的网络</span><br><span class="line">  rm          Remove one or more networks		# 删除一个或多个网络</span><br></pre></td></tr></table></figure>

<h6 id="由Docker默认创建的网络"><a href="#由Docker默认创建的网络" class="headerlink" title="由Docker默认创建的网络"></a>由Docker默认创建的网络</h6><p><img src="https://images.weserv.nl/?url=https://img2020.cnblogs.com/blog/2242444/202112/2242444-20211218070133875-1412409362.png"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[root@node1 ~]# docker network create --subnet 192.168.233.0/24 --gateway 192.168.233.254 netWork</span><br><span class="line">8e707433b97d58fb6329ec3cf6cf770d34df82b1050e16b56c4f7e6090cfbcc5</span><br><span class="line">[root@node1 ~]# docker network ls</span><br><span class="line">NETWORK ID     NAME      DRIVER    SCOPE</span><br><span class="line">712b32668ed2   bridge    bridge    local</span><br><span class="line">ca94de41081d   host      host      local</span><br><span class="line">8e707433b97d   netWork   bridge    local		# 这是我们新建出来的网络</span><br><span class="line">2ef78fbe2411   none      null      local</span><br><span class="line">[root@node1 ~]# docker run -it --network=8e centos /bin/bash		# 通过--network来指定容器网络</span><br><span class="line">[root@d9c64ba08629 /]# ip add</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">14: eth0@if15: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default</span><br><span class="line">    link/ether 02:42:c0:a8:e9:01 brd ff:ff:ff:ff:ff:ff link-netnsid 0</span><br><span class="line">    inet 192.168.233.1/24 brd 192.168.233.255 scope global eth0			# 已经获取到我们设置的地址</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">[root@d9c64ba08629 /]#</span><br></pre></td></tr></table></figure>

<p><strong>#不同Bridge的容器之间不能互通</strong></p>
<h2 id="Container"><a href="#Container" class="headerlink" title="Container"></a>Container</h2><p><img src="https://images.weserv.nl/?url=https://img2020.cnblogs.com/blog/2242444/202112/2242444-20211218070145064-275099183.png"></p>
<h6 id="Container模式是将创建好的新容器和已经存在的容器共享同一个网络-IP-x2F-Port-，而不是跟Bridge模式一样，新容器也不会创建一个属于自己的网卡和配置IP地址等等。当然，除了网络环境容器的其他资源还是默认进行隔离的。"><a href="#Container模式是将创建好的新容器和已经存在的容器共享同一个网络-IP-x2F-Port-，而不是跟Bridge模式一样，新容器也不会创建一个属于自己的网卡和配置IP地址等等。当然，除了网络环境容器的其他资源还是默认进行隔离的。" class="headerlink" title="Container模式是将创建好的新容器和已经存在的容器共享同一个网络(IP&#x2F;Port)，而不是跟Bridge模式一样，新容器也不会创建一个属于自己的网卡和配置IP地址等等。当然，除了网络环境容器的其他资源还是默认进行隔离的。"></a>Container模式是将创建好的新容器和已经存在的容器共享同一个网络(IP&#x2F;Port)，而不是跟Bridge模式一样，新容器也不会创建一个属于自己的网卡和配置IP地址等等。当然，除了网络环境容器的其他资源还是默认进行隔离的。</h6><h2 id="None"><a href="#None" class="headerlink" title="None"></a>None</h2><p><img src="https://images.weserv.nl/?url=https://img2020.cnblogs.com/blog/2242444/202112/2242444-20211218070154007-2147253083.png"></p>
<h6 id="None模式Docker不会为容器进行任何网络的设置，当创建好这个容器它不会拥有IP地址、DNS、路由等等，需要我们手动对容器进行设置，这种网络类型的容器是没有办法进行联网的。"><a href="#None模式Docker不会为容器进行任何网络的设置，当创建好这个容器它不会拥有IP地址、DNS、路由等等，需要我们手动对容器进行设置，这种网络类型的容器是没有办法进行联网的。" class="headerlink" title="None模式Docker不会为容器进行任何网络的设置，当创建好这个容器它不会拥有IP地址、DNS、路由等等，需要我们手动对容器进行设置，这种网络类型的容器是没有办法进行联网的。"></a>None模式Docker不会为容器进行任何网络的设置，当创建好这个容器它不会拥有IP地址、DNS、路由等等，需要我们手动对容器进行设置，这种网络类型的容器是没有办法进行联网的。</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建容器并设置网络为None</span></span><br><span class="line">[root@node1 ~]# docker network ls</span><br><span class="line">NETWORK ID     NAME      DRIVER    SCOPE</span><br><span class="line">712b32668ed2   bridge    bridge    local</span><br><span class="line">ca94de41081d   host      host      local</span><br><span class="line">8e707433b97d   netWork   bridge    local</span><br><span class="line">2ef78fbe2411   none      null      local</span><br><span class="line">[root@node1 ~]# docker run -itd --network=none centos</span><br><span class="line">0f2e0509e81bb5e34f68eabe429eaf0ab4eca6d1937c62626635fdb625b16676</span><br><span class="line">[root@node1 ~]# docker exec -it 0f ip add</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">[root@node1 ~]#</span><br></pre></td></tr></table></figure>





<h2 id="Host"><a href="#Host" class="headerlink" title="Host"></a>Host</h2><p><img src="https://images.weserv.nl/?url=https://img2020.cnblogs.com/blog/2242444/202112/2242444-20211218070205869-613575948.png"></p>
<h6 id="Host模式是指容器可以直接使用宿主机的IP地址进行通信，容器内的端口可以直接使用宿主机的端口不需要进行NAT。"><a href="#Host模式是指容器可以直接使用宿主机的IP地址进行通信，容器内的端口可以直接使用宿主机的端口不需要进行NAT。" class="headerlink" title="Host模式是指容器可以直接使用宿主机的IP地址进行通信，容器内的端口可以直接使用宿主机的端口不需要进行NAT。"></a>Host模式是指容器可以直接使用宿主机的IP地址进行通信，容器内的端口可以直接使用宿主机的端口不需要进行NAT。</h6><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建容器并设置网络为Host</span></span><br><span class="line">[root@node1 ~]# docker network ls</span><br><span class="line">NETWORK ID     NAME      DRIVER    SCOPE</span><br><span class="line">712b32668ed2   bridge    bridge    local</span><br><span class="line">ca94de41081d   host      host      local</span><br><span class="line">8e707433b97d   netWork   bridge    local</span><br><span class="line">2ef78fbe2411   none      null      local</span><br><span class="line">[root@node1 ~]# docker run -itd --network host centos</span><br><span class="line">3ef7cf52eba35f6286ecc863f896ff96386fb61b79815100fe1666a7a0381e3e</span><br><span class="line">[root@node1 ~]# docker exec -it 3e ip add</span><br><span class="line">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000</span><br><span class="line">    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00</span><br><span class="line">    inet 127.0.0.1/8 scope host lo</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 ::1/128 scope host</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">2: ens160: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc mq state UP group default qlen 1000</span><br><span class="line">    link/ether 00:0c:29:d0:69:a9 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 172.25.250.9/24 brd 172.25.250.255 scope global noprefixroute ens160</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::20c:29ff:fed0:69a9/64 scope link noprefixroute</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">3: virbr0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc noqueue state DOWN group default qlen 1000</span><br><span class="line">    link/ether 52:54:00:69:3a:f3 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.122.1/24 brd 192.168.122.255 scope global virbr0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">4: virbr0-nic: &lt;BROADCAST,MULTICAST&gt; mtu 1500 qdisc fq_codel master virbr0 state DOWN group default qlen 1000</span><br><span class="line">    link/ether 52:54:00:69:3a:f3 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">5: docker0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default</span><br><span class="line">    link/ether 02:42:b7:51:5a:38 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::42:b7ff:fe51:5a38/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">13: br-8e707433b97d: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default</span><br><span class="line">    link/ether 02:42:a0:c6:26:d2 brd ff:ff:ff:ff:ff:ff</span><br><span class="line">    inet 192.168.233.254/24 brd 192.168.233.255 scope global br-8e707433b97d</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">    inet6 fe80::42:a0ff:fec6:26d2/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">17: vethbe82798@if16: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master docker0 state UP group default</span><br><span class="line">    link/ether d2:95:6d:24:8b:5f brd ff:ff:ff:ff:ff:ff link-netnsid 0</span><br><span class="line">    inet6 fe80::d095:6dff:fe24:8b5f/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">19: veth76775e3@if18: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br-8e707433b97d state UP group default</span><br><span class="line">    link/ether 1a:48:2c:6f:f5:01 brd ff:ff:ff:ff:ff:ff link-netnsid 1</span><br><span class="line">    inet6 fe80::1848:2cff:fe6f:f501/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">21: vethfd72d16@if20: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master docker0 state UP group default</span><br><span class="line">    link/ether ae:d3:7c:80:fc:4e brd ff:ff:ff:ff:ff:ff link-netnsid 2</span><br><span class="line">    inet6 fe80::acd3:7cff:fe80:fc4e/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">25: vethafacb9a@if24: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master docker0 state UP group default</span><br><span class="line">    link/ether a2:dc:c1:1d:0d:66 brd ff:ff:ff:ff:ff:ff link-netnsid 3</span><br><span class="line">    inet6 fe80::a0dc:c1ff:fe1d:d66/64 scope link</span><br><span class="line">       valid_lft forever preferred_lft forever</span><br><span class="line">[root@node1 ~]#</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="https://www.xiaowangc.com">尤妤</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://www.xiaowangc.com/archives/1d9fbb6a.html">https://www.xiaowangc.com/archives/1d9fbb6a.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://www.xiaowangc.com" target="_blank">尤妤</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Docker/">Docker</a></div><div class="post_share"><div class="social-share" data-image="/img/fengmian/docker.jpeg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/archives/9842572a.html"><img class="prev-cover" src="/img/fengmian/lvs.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">LVS</div></div></a></div><div class="next-post pull-right"><a href="/archives/17703002.html"><img class="next-cover" src="/img/fengmian/ssh.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">ssh免密</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/archives/736ef7f1.html" title="个人生成的Docker镜像"><img class="cover" src="/img/fengmian/docker.jpeg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-04</div><div class="title">个人生成的Docker镜像</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/touxiang.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">尤妤</div><div class="author-info__description">欢迎来到尤妤的博客</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">58</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">53</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">17</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://wpa.qq.com/msgrd?v=3&amp;uin=780312916&amp;site=qq&amp;menu=yes"><i class="fa-brands fa-qq"></i><span>联系尤妤</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="mailto:admin@xiaowangc.com" target="_blank" title="邮箱"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://www.xiaowangc.com/baidusitemap.xml" target="_blank" title="站点地图"><i class="fas fa-map-location-dot"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">如果阅读过程中遇到了问题，请联系尤妤</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Docker%E5%AD%A6%E4%B9%A0"><span class="toc-number">1.</span> <span class="toc-text">Docker学习</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Docker%E6%A6%82%E5%BF%B5"><span class="toc-number">2.</span> <span class="toc-text">Docker概念</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="toc-number">2.1.</span> <span class="toc-text">Docker基本概念</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Docker-%E6%98%AF%E4%B8%80%E4%B8%AA%E5%BC%80%E6%BA%90%E7%9A%84%E5%BA%94%E7%94%A8%E5%AE%B9%E5%99%A8%E5%BC%95%E6%93%8E%EF%BC%8C%E8%AE%A9%E5%BC%80%E5%8F%91%E8%80%85%E5%8F%AF%E4%BB%A5%E6%89%93%E5%8C%85%E4%BB%96%E4%BB%AC%E7%9A%84%E5%BA%94%E7%94%A8%E4%BB%A5%E5%8F%8A%E4%BE%9D%E8%B5%96%E5%8C%85%E5%88%B0%E4%B8%80%E4%B8%AA%E5%8F%AF%E7%A7%BB%E6%A4%8D%E7%9A%84%E5%AE%B9%E5%99%A8%E4%B8%AD-%E7%84%B6%E5%90%8E%E5%8F%91%E5%B8%83%E5%88%B0%E4%BB%BB%E4%BD%95%E6%B5%81%E8%A1%8C%E7%9A%84Linux%E6%88%96Windows%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%9C%BA%E5%99%A8%E4%B8%8A-%E4%B9%9F%E5%8F%AF%E4%BB%A5%E5%AE%9E%E7%8E%B0%E8%99%9A%E6%8B%9F%E5%8C%96-%E5%AE%B9%E5%99%A8%E6%98%AF%E5%AE%8C%E5%85%A8%E4%BD%BF%E7%94%A8%E6%B2%99%E7%AE%B1%E6%9C%BA%E5%88%B6-%E7%9B%B8%E4%BA%92%E4%B9%8B%E9%97%B4%E4%B8%8D%E4%BC%9A%E6%9C%89%E4%BB%BB%E4%BD%95%E6%8E%A5%E5%8F%A3%E3%80%82"><span class="toc-number">2.1.0.0.0.1.</span> <span class="toc-text">Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中,然后发布到任何流行的Linux或Windows操作系统的机器上,也可以实现虚拟化,容器是完全使用沙箱机制,相互之间不会有任何接口。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Linux%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%9C%AC%E8%BA%AB%E4%BB%8E%E7%B3%BB%E7%BB%9F%E5%B1%82%E9%9D%A2%E5%B0%B1%E6%94%AF%E6%8C%81%E8%99%9A%E6%8B%9F%E5%8C%96%E6%8A%80%E6%9C%AFLXC%EF%BC%8CLXC%E6%9C%89%E4%B8%89%E5%A4%A7%E7%89%B9%E8%89%B2%EF%BC%9A"><span class="toc-number">2.1.0.0.0.2.</span> <span class="toc-text">Linux操作系统本身从系统层面就支持虚拟化技术LXC，LXC有三大特色：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Linux-Cgroups-Control-Groups-%EF%BC%89%E6%8F%90%E4%BE%9B%E4%BA%86%E5%AF%B9%E7%BB%84%E8%BF%9B%E7%A8%8B%E5%8F%8A%E5%B0%86%E6%9D%A5%E5%AD%90%E8%BF%9B%E7%A8%8B%E7%9A%84%E8%B5%84%E6%BA%90%E9%99%90%E5%88%B6%E3%80%81%E6%8E%A7%E5%88%B6%E5%92%8C%E7%BB%9F%E8%AE%A1%E7%9A%84%E8%83%BD%E5%8A%9B%EF%BC%8C%E8%BF%99%E4%BA%9B%E8%B5%84%E6%BA%90%E5%8C%85%E6%8B%AC-CPU%E3%80%81%E5%86%85%E5%AD%98%E3%80%81%E5%AD%98%E5%82%A8%E3%80%81%E7%BD%91%E7%BB%9C%E7%AD%89-%E9%80%9A%E8%BF%87-Cgroups-%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%96%B9%E4%BE%BF%E5%9C%B0%E9%99%90%E5%88%B6%E6%9F%90%E4%B8%AA%E8%BF%9B%E7%A8%8B%E7%9A%84%E8%B5%84%E6%BA%90%E5%8D%A0%E7%94%A8%EF%BC%8C%E5%B9%B6%E4%B8%94%E5%8F%AF%E4%BB%A5%E5%AE%9E%E6%97%B6%E5%9C%B0%E7%9B%91%E6%8E%A7%E8%BF%9B%E7%A8%8B%E7%9A%84%E7%9B%91%E6%8E%A7%E5%92%8C%E7%BB%9F%E8%AE%A1%E4%BF%A1%E6%81%AF"><span class="toc-number">2.1.0.0.0.3.</span> <span class="toc-text">Linux Cgroups (Control Groups ）提供了对组进程及将来子进程的资源限制、控制和统计的能力，这些资源包括 CPU、内存、存储、网络等 通过 Cgroups ，可以方便地限制某个进程的资源占用，并且可以实时地监控进程的监控和统计信息</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Linux-Namespace%E6%98%AFKernel%E7%9A%84%E4%B8%80%E4%B8%AA%E5%8A%9F%E8%83%BD%EF%BC%8C%E5%AE%83%E5%8F%AF%E4%BB%A5%E9%9A%94%E7%A6%BB%E4%B8%80%E7%B3%BB%E5%88%97%E7%9A%84%E7%B3%BB%E7%BB%9F%E8%B5%84%E6%BA%90%EF%BC%8C%E6%AF%94%E5%A6%82PID%E3%80%81UserID%E3%80%81Netwokr%E7%AD%89%E3%80%82"><span class="toc-number">2.1.0.0.0.4.</span> <span class="toc-text">Linux Namespace是Kernel的一个功能，它可以隔离一系列的系统资源，比如PID、UserID、Netwokr等。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Union-File-System-UnionFS-%E5%B0%86%E5%85%B6%E4%BB%96%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E8%81%94%E5%90%88%E5%88%B0%E4%B8%80%E4%B8%AA%E8%81%94%E5%90%88%E6%8C%82%E8%BD%BD%E7%82%B9%E7%9A%84%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1%E3%80%82%E5%AE%83%E4%BD%BF%E7%94%A8branch%E6%8A%8A%E4%B8%8D%E5%90%8C%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E7%9A%84%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E9%80%8F%E6%98%8E%E7%9A%84%E8%A6%86%E7%9B%96%EF%BC%8C%E5%BD%A2%E6%88%90%E4%B8%80%E4%B8%AA%E5%8D%95%E4%B8%80%E4%B8%80%E8%87%B4%E7%9A%84%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%EF%BC%8C%E5%BD%93%E5%AF%B9%E8%BF%99%E4%B8%AA%E8%81%94%E5%90%88%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E8%BF%9B%E8%A1%8C%E5%86%99%E6%93%8D%E4%BD%9C%E6%97%B6%EF%BC%8C%E7%B3%BB%E7%BB%9F%E6%98%AF%E7%9C%9F%E6%AD%A3%E5%86%99%E5%88%B0%E4%BA%86%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E6%96%87%E4%BB%B6%E4%B8%AD%EF%BC%8C%E8%BF%99%E4%B8%AA%E8%99%9A%E6%8B%9F%E5%90%8E%E7%9A%84%E8%81%94%E5%90%88%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F%E6%98%AF%E5%8F%AF%E4%BB%A5%E5%AF%B9%E4%BB%BB%E4%BD%95%E6%96%87%E4%BB%B6%E8%BF%9B%E8%A1%8C%E6%93%8D%E4%BD%9C%E7%9A%84%EF%BC%8C%E4%BD%86%E6%98%AF%E5%AE%83%E5%B9%B6%E6%B2%A1%E6%9C%89%E6%94%B9%E5%8F%98%E5%8E%9F%E6%9D%A5%E7%9A%84%E6%96%87%E4%BB%B6%EF%BC%8C%E5%9B%A0%E4%B8%BAunionfs%E7%94%A8%E5%88%B0%E4%BA%86%E4%B8%80%E4%B8%AA%E9%87%8D%E8%A6%81%E7%9A%84%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E6%8A%80%E6%9C%AF%EF%BC%8C%E5%8F%AB%E5%81%9A%E5%86%99%E6%97%B6%E5%A4%8D%E5%88%B6%E3%80%82"><span class="toc-number">2.1.0.0.0.5.</span> <span class="toc-text">Union File System(UnionFS): 将其他文件系统联合到一个联合挂载点的文件系统服务。它使用branch把不同文件系统的文件和目录透明的覆盖，形成一个单一一致的文件系统，当对这个联合文件系统进行写操作时，系统是真正写到了一个新的文件中，这个虚拟后的联合文件系统是可以对任何文件进行操作的，但是它并没有改变原来的文件，因为unionfs用到了一个重要的资源管理技术，叫做写时复制。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%86%99%E6%97%B6%E5%A4%8D%E5%88%B6-Copy-on-write-CoW-%E6%98%AF%E4%B8%80%E7%A7%8D%E5%AF%B9%E5%8F%AF%E4%BF%AE%E6%94%B9%E7%9A%84%E8%B5%84%E6%BA%90%E5%AE%9E%E7%8E%B0%E9%AB%98%E6%A0%A1%E5%A4%8D%E5%88%B6%E7%9A%84%E8%B5%84%E6%BA%90%E7%AE%A1%E7%90%86%E6%8A%80%E6%9C%AF%E3%80%82%E5%AE%83%E7%9A%84%E6%80%9D%E6%83%B3%E6%98%AF%EF%BC%8C%E5%A6%82%E6%9E%9C%E4%B8%80%E4%B8%AA%E8%B5%84%E6%BA%90%E6%98%AF%E9%87%8D%E5%A4%8D%E7%9A%84%E6%B2%A1%E6%9C%89%E4%BB%BB%E4%BD%95%E4%BF%AE%E6%94%B9%EF%BC%8C%E8%BF%99%E6%97%B6%E5%B9%B6%E4%B8%8D%E9%9C%80%E8%A6%81%E7%AB%8B%E5%8D%B3%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E6%96%B0%E7%9A%84%E8%B5%84%E6%BA%90%EF%BC%8C%E8%BF%99%E4%B8%AA%E8%B5%84%E6%BA%90%E5%8F%AF%E4%BB%A5%E8%A2%AB%E6%96%B0%E6%97%A7%E5%AE%9E%E4%BE%8B%E5%85%B1%E4%BA%AB%E3%80%82%E5%88%9B%E5%BB%BA%E6%96%B0%E8%B5%84%E6%BA%90%E5%8F%91%E7%94%9F%E5%9C%A8%E7%AC%AC%E4%B8%80%E6%AC%A1%E5%86%99%E6%93%8D%E4%BD%9C%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E5%AF%B9%E8%B5%84%E6%BA%90%E8%BF%9B%E8%A1%8C%E4%BF%AE%E6%94%B9%E7%9A%84%E6%97%B6%E5%80%99%E3%80%82%E9%80%9A%E8%BF%87%E8%BF%99%E7%A7%8D%E8%B5%84%E6%BA%90%E5%85%B1%E4%BA%AB%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%8C%E5%8F%AF%E4%BB%A5%E6%98%BE%E8%91%97%E5%9C%B0%E5%87%8F%E5%B0%91%E6%9C%AA%E4%BF%AE%E6%94%B9%E8%B5%84%E6%BA%90%E5%A4%8D%E5%88%B6%E5%B8%A6%E6%9D%A5%E7%9A%84%E6%B6%88%E8%80%97%EF%BC%8C%E4%BD%86%E6%98%AF%E8%B5%84%E6%BA%90%E4%B9%9F%E4%BC%9A%E5%9C%A8%E8%BF%9B%E8%A1%8C%E8%B5%84%E6%BA%90%E4%BF%AE%E6%94%B9%E6%97%B6%E5%A2%9E%E5%8A%A0%E5%B0%8F%E9%83%A8%E5%88%86%E7%9A%84%E5%BC%80%E9%94%80%E3%80%82"><span class="toc-number">2.1.0.0.0.6.</span> <span class="toc-text">写时复制(Copy-on-write,CoW): 是一种对可修改的资源实现高校复制的资源管理技术。它的思想是，如果一个资源是重复的没有任何修改，这时并不需要立即创建一个新的资源，这个资源可以被新旧实例共享。创建新资源发生在第一次写操作，也就是对资源进行修改的时候。通过这种资源共享的方式，可以显著地减少未修改资源复制带来的消耗，但是资源也会在进行资源修改时增加小部分的开销。</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E5%8C%96%E6%8A%80%E6%9C%AF"><span class="toc-number">2.2.</span> <span class="toc-text">虚拟化技术</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E5%8C%96%E5%88%86%E7%B1%BB"><span class="toc-number">2.2.1.</span> <span class="toc-text">虚拟化分类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BC%A0%E7%BB%9F%E8%99%9A%E6%8B%9F%E5%8C%96%E4%B8%8E%E5%AE%B9%E5%99%A8"><span class="toc-number">2.2.2.</span> <span class="toc-text">传统虚拟化与容器</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E8%99%9A%E6%8B%9F%E5%8C%96%E6%8A%80%E6%9C%AF%E6%A8%A1%E6%8B%9F%E5%87%BA%E4%B8%80%E6%95%B4%E5%A5%97%E7%A1%AC%E4%BB%B6%E8%AE%BE%E6%96%BD%EF%BC%8C%E7%84%B6%E5%90%8E%E5%9C%A8%E6%AD%A4%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%AE%89%E8%A3%85%E4%B8%80%E5%A5%97%E5%AE%8C%E6%95%B4%E7%9A%84%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%EF%BC%8C%E5%B9%B6%E5%9C%A8%E8%BF%99%E4%B8%AA%E7%B3%BB%E7%BB%9F%E4%B8%8A%E9%9D%A2%E5%AE%89%E8%A3%85%E5%92%8C%E8%BF%90%E8%A1%8C%E8%BD%AF%E4%BB%B6"><span class="toc-number">2.2.2.0.0.1.</span> <span class="toc-text">通过虚拟化技术模拟出一整套硬件设施，然后在此基础上安装一套完整的操作系统，并在这个系统上面安装和运行软件</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%9B%B4%E6%8E%A5%E8%BF%90%E8%A1%8C%E5%9C%A8%E5%AE%BF%E4%B8%BB%E6%9C%BA%E7%9A%84%E5%86%85%E6%A0%B8%EF%BC%8C%E5%AE%B9%E5%99%A8%E6%98%AF%E6%B2%A1%E6%9C%89%E8%87%AA%E5%B7%B1%E7%9A%84%E5%86%85%E6%A0%B8%EF%BC%9B%E6%AF%8F%E4%B8%AA%E5%AE%B9%E5%99%A8%E9%83%BD%E6%98%AF%E4%BA%92%E7%9B%B8%E9%9A%94%E7%A6%BB%E4%BA%92%E4%B8%8D%E5%BD%B1%E5%93%8D%EF%BC%8C%E6%AF%8F%E4%B8%AA%E5%AE%B9%E5%99%A8%E9%83%BD%E6%9C%89%E8%87%AA%E5%B7%B1%E7%9A%84%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-number">2.2.2.0.0.2.</span> <span class="toc-text">直接运行在宿主机的内核，容器是没有自己的内核；每个容器都是互相隔离互不影响，每个容器都有自己的文件系统</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Docker%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2"><span class="toc-number">3.</span> <span class="toc-text">Docker安装部署</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker%E7%9A%84%E5%9F%BA%E6%9C%AC%E7%BB%84%E6%88%90"><span class="toc-number">3.1.</span> <span class="toc-text">Docker的基本组成</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker%E5%AE%89%E8%A3%85"><span class="toc-number">3.2.</span> <span class="toc-text">Docker安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E7%B3%BB%E7%BB%9F%E7%8E%AF%E5%A2%83"><span class="toc-number">3.2.1.</span> <span class="toc-text">准备系统环境</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%B8%E8%BD%BD%E6%97%A7%E7%89%88%E6%9C%AC"><span class="toc-number">3.2.2.</span> <span class="toc-text">卸载旧版本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%96%B9%E5%BC%8F"><span class="toc-number">3.2.3.</span> <span class="toc-text">安装方式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E5%BA%93%E8%BF%9B%E8%A1%8C%E5%9C%A8%E7%BA%BF%E5%AE%89%E8%A3%85"><span class="toc-number">3.2.4.</span> <span class="toc-text">使用存储库进行在线安装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%B8%E8%BD%BDDocker"><span class="toc-number">3.3.</span> <span class="toc-text">卸载Docker</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Docker%E5%91%BD%E4%BB%A4"><span class="toc-number">4.</span> <span class="toc-text">Docker命令</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%95%9C%E5%83%8F%E5%91%BD%E4%BB%A4"><span class="toc-number">4.1.</span> <span class="toc-text">镜像命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E5%91%BD%E4%BB%A4"><span class="toc-number">4.2.</span> <span class="toc-text">容器命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E5%91%BD%E4%BB%A4"><span class="toc-number">4.3.</span> <span class="toc-text">其他命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker-commit"><span class="toc-number">4.4.</span> <span class="toc-text">Docker commit</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%B9%E5%99%A8%E5%8D%B7-%E5%AE%B9%E5%99%A8%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96"><span class="toc-number">5.</span> <span class="toc-text">容器卷(容器数据持久化)</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Docker%E5%AF%B9%E4%BA%8E%E5%AE%BF%E4%B8%BB%E6%9C%BA%E6%9D%A5%E8%AF%B4%EF%BC%8C%E5%8F%AA%E6%98%AF%E4%B8%80%E4%B8%AA%E8%BF%90%E8%A1%8C%E5%9C%A8Linux%E4%B8%8A%E7%9A%84%E5%BA%94%E7%94%A8%E7%A8%8B%E5%BA%8F%EF%BC%8C%E5%9B%A0%E6%AD%A4%E5%AE%83%E7%9A%84%E7%9A%84%E6%95%B0%E6%8D%AE%E5%AD%98%E5%82%A8%E8%BF%98%E6%98%AF%E4%BC%9A%E4%BE%9D%E8%B5%96%E5%AE%BF%E4%B8%BB%E6%9C%BA%EF%BC%8C%E5%AE%9E%E7%8E%B0%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%9A"><span class="toc-number">5.0.0.0.0.1.</span> <span class="toc-text">Docker对于宿主机来说，只是一个运行在Linux上的应用程序，因此它的的数据存储还是会依赖宿主机，实现数据持久化的两种方式：</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Bind-Mount%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96%E7%9A%84%E6%96%B9%E5%BC%8F%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%8C%82%E8%BD%BD%E6%9C%AC%E5%9C%B0%E7%9A%84%E4%B8%80%E4%B8%AA%E7%9B%AE%E5%BD%95%EF%BC%8C%E5%88%99%E5%AF%B9%E5%BA%94%E5%AE%B9%E5%99%A8%E7%9A%84%E7%9B%AE%E5%BD%95%E4%B8%8B%E7%9A%84%E5%86%85%E5%AE%B9%E4%BC%9A%E8%A2%AB%E6%9C%AC%E5%9C%B0%E7%9A%84%E6%95%B0%E6%8D%AE%E8%A6%86%E7%9B%96%E3%80%82%E4%BD%BF%E7%94%A8Bind-Mount%E8%BF%98%E9%9C%80%E8%A6%81%E6%8C%87%E5%AE%9A%E6%9C%AC%E5%9C%B0%E7%9A%84%E6%9F%90%E4%B8%AA%E7%9B%AE%E5%BD%95%E6%8C%82%E8%BD%BD%E5%88%B0%E5%AE%B9%E5%99%A8%E7%9A%84%E6%9F%90%E4%B8%AA%E7%9B%AE%E5%BD%95%E3%80%82"><span class="toc-number">5.0.0.0.0.2.</span> <span class="toc-text">Bind Mount数据持久化的方式，如果挂载本地的一个目录，则对应容器的目录下的内容会被本地的数据覆盖。使用Bind Mount还需要指定本地的某个目录挂载到容器的某个目录。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Docker-Manager-Volume%E7%9B%B8%E6%AF%94Bind-Mount%EF%BC%8C%E6%8C%82%E8%BD%BD%E7%9B%AE%E5%BD%95%E5%88%B0%E5%AE%B9%E5%99%A8%E4%B8%AD%E6%95%B0%E6%8D%AE%E4%B8%8D%E4%BC%9A%E8%A2%AB%E8%A6%86%E7%9B%96%EF%BC%8C%E5%90%8C%E6%97%B6%E4%B9%9F%E4%B8%8D%E9%9C%80%E8%A6%81%E7%AE%A1%E7%90%86%E5%91%98%E6%8C%87%E5%AE%9A%E4%BB%8E%E5%AE%BF%E4%B8%BB%E6%9C%BA%E6%8C%82%E8%BD%BD%E5%88%B0%E5%AE%B9%E5%99%A8%E4%B8%AD%E7%9A%84%E6%9F%90%E4%B8%AA%E7%9B%AE%E5%BD%95%EF%BC%8C%E5%8F%AA%E9%9C%80%E8%A6%81%E6%8C%87%E5%AE%9A%E5%AF%B9%E5%AE%B9%E5%99%A8%E7%9A%84%E6%9F%90%E4%B8%AA%E7%9B%AE%E5%BD%95%E8%BF%9B%E8%A1%8C%E6%8C%82%E8%BD%BD%EF%BC%8C%E8%80%8C%E6%8C%82%E8%BD%BD%E5%88%B0%E5%AE%BF%E4%B8%BB%E6%9C%BA%E7%9A%84%E6%9F%90%E4%B8%AA%E7%9B%AE%E5%BD%95%E6%98%AF%E7%94%B1Docker%E6%9D%A5%E8%BF%9B%E8%A1%8C%E7%BB%9F%E4%B8%80%E7%AE%A1%E7%90%86%E3%80%82"><span class="toc-number">5.0.0.0.0.3.</span> <span class="toc-text">Docker Manager Volume相比Bind Mount，挂载目录到容器中数据不会被覆盖，同时也不需要管理员指定从宿主机挂载到容器中的某个目录，只需要指定对容器的某个目录进行挂载，而挂载到宿主机的某个目录是由Docker来进行统一管理。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BB%BB%E4%B8%80%E4%B8%80%E7%A7%8D%E6%96%B9%E5%BC%8F%E7%9A%84%E6%8C%81%E4%B9%85%E5%8C%96%E9%83%BD%E4%B8%8D%E4%BC%9A%E5%9C%A8%E5%AE%B9%E5%99%A8%E8%A2%AB%E5%88%A0%E9%99%A4%E5%90%8E%E5%AF%BC%E8%87%B4%E6%95%B0%E6%8D%AE%E4%B8%A2%E5%A4%B1"><span class="toc-number">5.0.0.0.0.4.</span> <span class="toc-text">任一一种方式的持久化都不会在容器被删除后导致数据丢失</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Bind-Mount"><span class="toc-number">5.1.</span> <span class="toc-text">Bind Mount</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Docker-Manager-Volume"><span class="toc-number">5.2.</span> <span class="toc-text">Docker  Manager Volume</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%81%9A%E5%90%8D%E5%92%8C%E5%8C%BF%E5%90%8D%E6%8C%82%E8%BD%BD"><span class="toc-number">5.3.</span> <span class="toc-text">聚名和匿名挂载</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Docker-File"><span class="toc-number">6.</span> <span class="toc-text">Docker File</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Docker-Network"><span class="toc-number">7.</span> <span class="toc-text">Docker Network</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Bridge"><span class="toc-number">7.1.</span> <span class="toc-text">Bridge</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A1%A5%E6%8E%A5-Bridge-%E7%BD%91%E7%BB%9C%E4%BB%8E%E4%B8%8A%E5%9B%BE%E5%B0%B1%E5%8F%AF%E4%BB%A5%E7%9C%8B%E5%87%BA%E6%9D%A5%EF%BC%8C%E6%88%91%E4%BB%AC%E5%88%9B%E5%BB%BA%E7%9A%84%E4%B8%A4%E5%8F%B0%E5%AE%B9%E5%99%A8%E6%98%AF%E4%B8%8D%E8%83%BD%E7%9B%B4%E6%8E%A5%E8%BF%9B%E8%A1%8C%E9%80%9A%E4%BF%A1%E8%80%8C%E6%98%AF%E7%BB%8F%E8%BF%87Docker0%E8%BF%9B%E8%A1%8C%E6%A1%A5%E6%8E%A5%E5%AE%9E%E7%8E%B0%E7%9A%84-%E4%BA%8C%E5%B1%82%E4%BA%A4%E6%8D%A2-%E3%80%82%E5%9C%A8%E5%88%9B%E5%BB%BA%E5%AE%B9%E5%99%A8%E6%97%B6%EF%BC%8C%E5%A6%82%E6%9E%9C%E6%B2%A1%E6%9C%89%E6%9B%B4%E6%94%B9%E5%AE%B9%E5%99%A8%E7%BD%91%E7%BB%9C%E9%82%A3%E4%B9%88%E5%AE%B9%E5%99%A8%E9%BB%98%E8%AE%A4%E5%B0%86%E5%8A%A0%E5%85%A5%E5%88%B0Docker0%E4%B8%AD%E3%80%82"><span class="toc-number">7.1.0.0.0.1.</span> <span class="toc-text">桥接(Bridge)网络从上图就可以看出来，我们创建的两台容器是不能直接进行通信而是经过Docker0进行桥接实现的(二层交换)。在创建容器时，如果没有更改容器网络那么容器默认将加入到Docker0中。</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%94%B1Docker%E9%BB%98%E8%AE%A4%E5%88%9B%E5%BB%BA%E7%9A%84%E7%BD%91%E7%BB%9C"><span class="toc-number">7.1.0.0.0.2.</span> <span class="toc-text">由Docker默认创建的网络</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Container"><span class="toc-number">7.2.</span> <span class="toc-text">Container</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Container%E6%A8%A1%E5%BC%8F%E6%98%AF%E5%B0%86%E5%88%9B%E5%BB%BA%E5%A5%BD%E7%9A%84%E6%96%B0%E5%AE%B9%E5%99%A8%E5%92%8C%E5%B7%B2%E7%BB%8F%E5%AD%98%E5%9C%A8%E7%9A%84%E5%AE%B9%E5%99%A8%E5%85%B1%E4%BA%AB%E5%90%8C%E4%B8%80%E4%B8%AA%E7%BD%91%E7%BB%9C-IP-x2F-Port-%EF%BC%8C%E8%80%8C%E4%B8%8D%E6%98%AF%E8%B7%9FBridge%E6%A8%A1%E5%BC%8F%E4%B8%80%E6%A0%B7%EF%BC%8C%E6%96%B0%E5%AE%B9%E5%99%A8%E4%B9%9F%E4%B8%8D%E4%BC%9A%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%B1%9E%E4%BA%8E%E8%87%AA%E5%B7%B1%E7%9A%84%E7%BD%91%E5%8D%A1%E5%92%8C%E9%85%8D%E7%BD%AEIP%E5%9C%B0%E5%9D%80%E7%AD%89%E7%AD%89%E3%80%82%E5%BD%93%E7%84%B6%EF%BC%8C%E9%99%A4%E4%BA%86%E7%BD%91%E7%BB%9C%E7%8E%AF%E5%A2%83%E5%AE%B9%E5%99%A8%E7%9A%84%E5%85%B6%E4%BB%96%E8%B5%84%E6%BA%90%E8%BF%98%E6%98%AF%E9%BB%98%E8%AE%A4%E8%BF%9B%E8%A1%8C%E9%9A%94%E7%A6%BB%E7%9A%84%E3%80%82"><span class="toc-number">7.2.0.0.0.1.</span> <span class="toc-text">Container模式是将创建好的新容器和已经存在的容器共享同一个网络(IP&#x2F;Port)，而不是跟Bridge模式一样，新容器也不会创建一个属于自己的网卡和配置IP地址等等。当然，除了网络环境容器的其他资源还是默认进行隔离的。</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#None"><span class="toc-number">7.3.</span> <span class="toc-text">None</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#None%E6%A8%A1%E5%BC%8FDocker%E4%B8%8D%E4%BC%9A%E4%B8%BA%E5%AE%B9%E5%99%A8%E8%BF%9B%E8%A1%8C%E4%BB%BB%E4%BD%95%E7%BD%91%E7%BB%9C%E7%9A%84%E8%AE%BE%E7%BD%AE%EF%BC%8C%E5%BD%93%E5%88%9B%E5%BB%BA%E5%A5%BD%E8%BF%99%E4%B8%AA%E5%AE%B9%E5%99%A8%E5%AE%83%E4%B8%8D%E4%BC%9A%E6%8B%A5%E6%9C%89IP%E5%9C%B0%E5%9D%80%E3%80%81DNS%E3%80%81%E8%B7%AF%E7%94%B1%E7%AD%89%E7%AD%89%EF%BC%8C%E9%9C%80%E8%A6%81%E6%88%91%E4%BB%AC%E6%89%8B%E5%8A%A8%E5%AF%B9%E5%AE%B9%E5%99%A8%E8%BF%9B%E8%A1%8C%E8%AE%BE%E7%BD%AE%EF%BC%8C%E8%BF%99%E7%A7%8D%E7%BD%91%E7%BB%9C%E7%B1%BB%E5%9E%8B%E7%9A%84%E5%AE%B9%E5%99%A8%E6%98%AF%E6%B2%A1%E6%9C%89%E5%8A%9E%E6%B3%95%E8%BF%9B%E8%A1%8C%E8%81%94%E7%BD%91%E7%9A%84%E3%80%82"><span class="toc-number">7.3.0.0.0.1.</span> <span class="toc-text">None模式Docker不会为容器进行任何网络的设置，当创建好这个容器它不会拥有IP地址、DNS、路由等等，需要我们手动对容器进行设置，这种网络类型的容器是没有办法进行联网的。</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Host"><span class="toc-number">7.4.</span> <span class="toc-text">Host</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#Host%E6%A8%A1%E5%BC%8F%E6%98%AF%E6%8C%87%E5%AE%B9%E5%99%A8%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8%E5%AE%BF%E4%B8%BB%E6%9C%BA%E7%9A%84IP%E5%9C%B0%E5%9D%80%E8%BF%9B%E8%A1%8C%E9%80%9A%E4%BF%A1%EF%BC%8C%E5%AE%B9%E5%99%A8%E5%86%85%E7%9A%84%E7%AB%AF%E5%8F%A3%E5%8F%AF%E4%BB%A5%E7%9B%B4%E6%8E%A5%E4%BD%BF%E7%94%A8%E5%AE%BF%E4%B8%BB%E6%9C%BA%E7%9A%84%E7%AB%AF%E5%8F%A3%E4%B8%8D%E9%9C%80%E8%A6%81%E8%BF%9B%E8%A1%8CNAT%E3%80%82"><span class="toc-number">7.4.0.0.0.1.</span> <span class="toc-text">Host模式是指容器可以直接使用宿主机的IP地址进行通信，容器内的端口可以直接使用宿主机的端口不需要进行NAT。</span></a></li></ol></li></ol></li></ol></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/archives/bc2a8490.html" title="Linux证书有效期检测脚本"><img src="/img/fengmian/linux.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux证书有效期检测脚本"/></a><div class="content"><a class="title" href="/archives/bc2a8490.html" title="Linux证书有效期检测脚本">Linux证书有效期检测脚本</a><time datetime="2023-01-21T18:51:55.000Z" title="发表于 2023-01-22 02:51:55">2023-01-22</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/archives/e3278faf.html" title="关于Kubernetes配置私有镜像仓库"><img src="/img/fengmian/k8s.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="关于Kubernetes配置私有镜像仓库"/></a><div class="content"><a class="title" href="/archives/e3278faf.html" title="关于Kubernetes配置私有镜像仓库">关于Kubernetes配置私有镜像仓库</a><time datetime="2023-01-21T09:19:38.000Z" title="发表于 2023-01-21 17:19:38">2023-01-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/archives/d89a6add.html" title="Containerd安装脚本"><img src="/img/fengmian/k8s.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Containerd安装脚本"/></a><div class="content"><a class="title" href="/archives/d89a6add.html" title="Containerd安装脚本">Containerd安装脚本</a><time datetime="2023-01-20T12:03:22.000Z" title="发表于 2023-01-20 20:03:22">2023-01-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/archives/93a87db7.html" title="ES&amp;Kibana安装配置"><img src="/img/fengmian/elastic_logo.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ES&amp;Kibana安装配置"/></a><div class="content"><a class="title" href="/archives/93a87db7.html" title="ES&amp;Kibana安装配置">ES&amp;Kibana安装配置</a><time datetime="2023-01-10T07:32:11.000Z" title="发表于 2023-01-10 15:32:11">2023-01-10</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/archives/bd4820af.html" title="Poste.io邮件服务器"><img src="/img/fengmian/email.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Poste.io邮件服务器"/></a><div class="content"><a class="title" href="/archives/bd4820af.html" title="Poste.io邮件服务器">Poste.io邮件服务器</a><time datetime="2022-12-16T02:39:37.000Z" title="发表于 2022-12-16 10:39:37">2022-12-16</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('/img/fengmian/docker.jpeg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By 尤妤</div><div class="framework-info"><span><a href="https://hexo.io/" target="_blank" title="由 Halo 强力驱动" style="text-decoration:none;"><span style="color: #fff;border-bottom-left-radius: 4px;border-top-left-radius: 4px;background-color: #505050;padding: 1px 3px 1px 3px;" ><img src="https://www.xiaowangc.com/img/hexo.png" style="vertical-align:text-bottom">&nbsp</i>Powered</span><span data-v-625f2a9e="" style="color: #fff;padding: 1px 3px 1px 3px;background-color: #007ec6!important;border-top-right-radius: 4px;border-bottom-right-radius: 4px;">Hexo v6.2.0</span></a></span>
<span><a href="https://cloud.tencent.com/" target="_blank" title="由Tencent Cloud托管" style="text-decoration:none;"><span style="color: #fff;border-bottom-left-radius: 4px;border-top-left-radius: 4px;background-color: #505050;padding: 1px 3px 1px 3px;" ><i class="fa-brands fa-docker">&nbsp</i>Trusteeship</span><span data-v-625f2a9e="" style="color: #fff;padding: 1px 3px 1px 3px;background-color: #44e0c0!important;border-top-right-radius: 4px;border-bottom-right-radius: 4px;">Tencent Cloud</span></a></span>
<span><a href="https://beian.miit.gov.cn/" target="_blank" title="ICP备案" style="text-decoration:none;"><span style="color: #fff;border-bottom-left-radius: 4px;border-top-left-radius: 4px;background-color: #505050;padding: 1px 3px 1px 3px;"><img src="https://www.xiaowangc.com/img/icp.png" style="vertical-align:text-bottom">&nbsp</i>蜀ICP备</span><span data-v-625f2a9e="" style="color: #fff;padding: 1px 3px 1px 3px;background-color: red!important;border-top-right-radius: 4px;border-bottom-right-radius: 4px;">2022002393-1号</span></a></span>
<span><a href="https://icp.gov.moe/" target="_blank" title="萌国备案" style="text-decoration:none;"><span style="color: #fff;border-bottom-left-radius: 4px;border-top-left-radius: 4px;background-color: #505050;padding: 1px 3px 1px 3px;"><img src="https://www.xiaowangc.com/img/mb.ico" style="vertical-align:text-bottom">&nbsp</i>萌备</span><span data-v-625f2a9e="" style="color: #fff;padding: 1px 3px 1px 3px;background-color: orange!important;border-top-right-radius: 4px;border-bottom-right-radius: 4px;">20220706号</span></a></span>
<span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" title="主题" style="text-decoration:none;"><span style="color: #fff;border-bottom-left-radius: 4px;border-top-left-radius: 4px;background-color: #505050;padding: 1px 3px 1px 3px;"><i class="fa-brands fa-github"></i>&nbsp</i>Theme</span><span data-v-625f2a9e="" style="color: #fff;padding: 1px 3px 1px 3px;background-color: #4dc820!important;border-top-right-radius: 4px;border-bottom-right-radius: 4px;">Butterfly</span></a></span></div><div class="footer_custom_text"><a target="_blank" rel="noopener" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral" style="text-decoration:none;"><span>本网站由</span><img src="https://www.xiaowangc.com/img/y_logo5.png" width="48" height="24" style="vertical-align:text-bottom"></img><span>提供CDN加速/云存储服务</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script defer src="https://npm.elemecdn.com/jquery@latest/dist/jquery.min.js"></script><script data-pjax defer src="https://npm.elemecdn.com/tzy-blog/lib/js/theme/chocolate.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>